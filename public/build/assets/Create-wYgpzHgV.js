import{r as I,d as Ae,g as Wt,a as Gt,j as h,H as qt,b as Re}from"./app-CUXBW5dx.js";import{j as Vt,P as yt,k as Ut,l as Ht,m as Yt,n as Zt,o as Qt,p as Jt,A as Xt}from"./AdminLayout-Dj6WvTEP.js";import{B as ge}from"./index-BvATWSjf.js";import{I as en}from"./input-HL_z3B_7.js";import{L as tn}from"./label-DNEfGfht.js";import{C as nn,a as rn,e as sn}from"./card-Dczj2hiM.js";import{S as an}from"./spotlight-card-CY9ososU.js";import{P as on,a as cn,b as un}from"./popover-CZ-OFO0b.js";import{c as ln}from"./utils-BELw0PCo.js";import{t as oe}from"./index-B0o19xSs.js";import{B as hn}from"./badge-DSYp6RDo.js";import{A as dn,S as fn}from"./separator-BEhvHPUl.js";import{c as Me}from"./createLucideIcon-uJREzNGo.js";import{A as rt}from"./index-Bgpi0fHY.js";import{i as pn,u as ke,a as mn,M as gn,b as yn,f as vn,c as bn,d as Ie,m as Ce}from"./proxy-BiQenJV9.js";import{B as xn}from"./banknote-qYlopA63.js";import{C as wn}from"./credit-card-7WpBEtQD.js";import{L as Cn}from"./loader-circle-CiGR35HH.js";import{T as Mn}from"./trash-Bxym_lDS.js";import"./dialog-C2_qrMnw.js";import"./index-88lnrqSU.js";import"./index-DFuNHLiv.js";import"./check-pd34nBtK.js";import"./BackgroundParticles-D888wk9C.js";import"./shirt-DHfAMZvd.js";const An=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Sn=Me("chevrons-up-down",An);const En=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],kn=Me("keyboard",En);const jn=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],it=Me("mic-off",jn);const Ln=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],st=Me("mic",Ln);const Tn=[["path",{d:"M5 12h14",key:"1ays0h"}]],Nn=Me("minus",Tn);const Fn=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Rn=Me("shopping-cart",Fn);function In(...t){const e=!Array.isArray(t[0]),r=e?0:-1,s=t[0+r],a=t[1+r],c=t[2+r],o=t[3+r],l=pn(a,c,o);return e?l(s):l}function vt(t){const e=ke(()=>mn(t)),{isStatic:r}=I.useContext(gn);if(r){const[,s]=I.useState(t);I.useEffect(()=>e.on("change",s),[])}return e}function bt(t,e){const r=vt(e()),s=()=>r.set(e());return s(),yn(()=>{const a=()=>vn.preRender(s,!1,!0),c=t.map(o=>o.on("change",a));return()=>{c.forEach(o=>o()),bn(s)}}),r}function Dn(t){Ie.current=[],t();const e=bt(Ie.current,t);return Ie.current=void 0,e}function ze(t,e,r,s){if(typeof t=="function")return Dn(t);if(r!==void 0&&!Array.isArray(r)&&typeof e!="function")return Bn(t,e,r,s);const o=typeof e=="function"?e:In(e,r,s);return Array.isArray(t)?at(t,o):at([t],([l])=>o(l))}function at(t,e){const r=ke(()=>[]);return bt(t,()=>{r.length=0;const s=t.length;for(let a=0;a<s;a++)r[a]=t[a].get();return e(r)})}function Bn(t,e,r,s){const a=ke(()=>Object.keys(r)),c=ke(()=>({}));for(const o of a)c[o]=ze(t,e,r[o],s);return c}var De={exports:{}},ot;function _n(){return ot||(ot=1,(function(t){var e=(function(r){var s=Object.prototype,a=s.hasOwnProperty,c=Object.defineProperty||function(f,i,n){f[i]=n.value},o,l=typeof Symbol=="function"?Symbol:{},p=l.iterator||"@@iterator",y=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function w(f,i,n){return Object.defineProperty(f,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),f[i]}try{w({},"")}catch{w=function(i,n,m){return i[n]=m}}function j(f,i,n,m){var g=i&&i.prototype instanceof L?i:L,b=Object.create(g.prototype),E=new ee(m||[]);return c(b,"_invoke",{value:G(f,n,E)}),b}r.wrap=j;function M(f,i,n){try{return{type:"normal",arg:f.call(i,n)}}catch(m){return{type:"throw",arg:m}}}var N="suspendedStart",_="suspendedYield",k="executing",q="completed",z={};function L(){}function Y(){}function S(){}var B={};w(B,p,function(){return this});var P=Object.getPrototypeOf,D=P&&P(P(se([])));D&&D!==s&&a.call(D,p)&&(B=D);var O=S.prototype=L.prototype=Object.create(B);Y.prototype=S,c(O,"constructor",{value:S,configurable:!0}),c(S,"constructor",{value:Y,configurable:!0}),Y.displayName=w(S,u,"GeneratorFunction");function J(f){["next","throw","return"].forEach(function(i){w(f,i,function(n){return this._invoke(i,n)})})}r.isGeneratorFunction=function(f){var i=typeof f=="function"&&f.constructor;return i?i===Y||(i.displayName||i.name)==="GeneratorFunction":!1},r.mark=function(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,S):(f.__proto__=S,w(f,u,"GeneratorFunction")),f.prototype=Object.create(O),f},r.awrap=function(f){return{__await:f}};function U(f,i){function n(b,E,A,v){var C=M(f[b],f,E);if(C.type==="throw")v(C.arg);else{var $=C.arg,W=$.value;return W&&typeof W=="object"&&a.call(W,"__await")?i.resolve(W.__await).then(function(K){n("next",K,A,v)},function(K){n("throw",K,A,v)}):i.resolve(W).then(function(K){$.value=K,A($)},function(K){return n("throw",K,A,v)})}}var m;function g(b,E){function A(){return new i(function(v,C){n(b,E,v,C)})}return m=m?m.then(A,A):A()}c(this,"_invoke",{value:g})}J(U.prototype),w(U.prototype,y,function(){return this}),r.AsyncIterator=U,r.async=function(f,i,n,m,g){g===void 0&&(g=Promise);var b=new U(j(f,i,n,m),g);return r.isGeneratorFunction(i)?b:b.next().then(function(E){return E.done?E.value:b.next()})};function G(f,i,n){var m=N;return function(b,E){if(m===k)throw new Error("Generator is already running");if(m===q){if(b==="throw")throw E;return ne()}for(n.method=b,n.arg=E;;){var A=n.delegate;if(A){var v=X(A,n);if(v){if(v===z)continue;return v}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(m===N)throw m=q,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);m=k;var C=M(f,i,n);if(C.type==="normal"){if(m=n.done?q:_,C.arg===z)continue;return{value:C.arg,done:n.done}}else C.type==="throw"&&(m=q,n.method="throw",n.arg=C.arg)}}}function X(f,i){var n=i.method,m=f.iterator[n];if(m===o)return i.delegate=null,n==="throw"&&f.iterator.return&&(i.method="return",i.arg=o,X(f,i),i.method==="throw")||n!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),z;var g=M(m,f.iterator,i.arg);if(g.type==="throw")return i.method="throw",i.arg=g.arg,i.delegate=null,z;var b=g.arg;if(!b)return i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,z;if(b.done)i[f.resultName]=b.value,i.next=f.nextLoc,i.method!=="return"&&(i.method="next",i.arg=o);else return b;return i.delegate=null,z}J(O),w(O,u,"Generator"),w(O,p,function(){return this}),w(O,"toString",function(){return"[object Generator]"});function V(f){var i={tryLoc:f[0]};1 in f&&(i.catchLoc=f[1]),2 in f&&(i.finallyLoc=f[2],i.afterLoc=f[3]),this.tryEntries.push(i)}function H(f){var i=f.completion||{};i.type="normal",delete i.arg,f.completion=i}function ee(f){this.tryEntries=[{tryLoc:"root"}],f.forEach(V,this),this.reset(!0)}r.keys=function(f){var i=Object(f),n=[];for(var m in i)n.push(m);return n.reverse(),function g(){for(;n.length;){var b=n.pop();if(b in i)return g.value=b,g.done=!1,g}return g.done=!0,g}};function se(f){if(f!=null){var i=f[p];if(i)return i.call(f);if(typeof f.next=="function")return f;if(!isNaN(f.length)){var n=-1,m=function g(){for(;++n<f.length;)if(a.call(f,n))return g.value=f[n],g.done=!1,g;return g.value=o,g.done=!0,g};return m.next=m}}throw new TypeError(typeof f+" is not iterable")}r.values=se;function ne(){return{value:o,done:!0}}return ee.prototype={constructor:ee,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(H),!f)for(var i in this)i.charAt(0)==="t"&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=o)},stop:function(){this.done=!0;var f=this.tryEntries[0],i=f.completion;if(i.type==="throw")throw i.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var i=this;function n(v,C){return b.type="throw",b.arg=f,i.next=v,C&&(i.method="next",i.arg=o),!!C}for(var m=this.tryEntries.length-1;m>=0;--m){var g=this.tryEntries[m],b=g.completion;if(g.tryLoc==="root")return n("end");if(g.tryLoc<=this.prev){var E=a.call(g,"catchLoc"),A=a.call(g,"finallyLoc");if(E&&A){if(this.prev<g.catchLoc)return n(g.catchLoc,!0);if(this.prev<g.finallyLoc)return n(g.finallyLoc)}else if(E){if(this.prev<g.catchLoc)return n(g.catchLoc,!0)}else if(A){if(this.prev<g.finallyLoc)return n(g.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(f,i){for(var n=this.tryEntries.length-1;n>=0;--n){var m=this.tryEntries[n];if(m.tryLoc<=this.prev&&a.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var g=m;break}}g&&(f==="break"||f==="continue")&&g.tryLoc<=i&&i<=g.finallyLoc&&(g=null);var b=g?g.completion:{};return b.type=f,b.arg=i,g?(this.method="next",this.next=g.finallyLoc,z):this.complete(b)},complete:function(f,i){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&i&&(this.next=i),z},finish:function(f){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===f)return this.complete(n.completion,n.afterLoc),H(n),z}},catch:function(f){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===f){var m=n.completion;if(m.type==="throw"){var g=m.arg;H(n)}return g}}throw new Error("illegal catch attempt")},delegateYield:function(f,i,n){return this.delegate={iterator:se(f),resultName:i,nextLoc:n},this.method==="next"&&(this.arg=o),z}},r})(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(De)),De.exports}_n();const xt=["shift","alt","meta","mod","ctrl","control"],Pn={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function fe(t){return(Pn[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function wt(t){return xt.includes(t)}function Be(t,e=","){return t.toLowerCase().split(e)}function _e(t,e="+",r=">",s=!1,a,c){let o=[],l=!1;t=t.trim(),t.includes(r)?(l=!0,o=t.toLocaleLowerCase().split(r).map(u=>fe(u))):o=t.toLocaleLowerCase().split(e).map(u=>fe(u));const p={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod"),useKey:s},y=o.filter(u=>!xt.includes(u));return{...p,keys:y,description:a,isSequence:l,hotkey:t,metadata:c}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&Ct([fe(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&Mt([fe(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{le.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{le.clear()},0)}));const le=new Set;function Ye(t){return Array.isArray(t)}function On(t,e=","){return(Ye(t)?t:t.split(e)).every(r=>le.has(r.trim().toLowerCase()))}function Ct(t){const e=Array.isArray(t)?t:[t];le.has("meta")&&le.forEach(r=>{wt(r)||le.delete(r.toLowerCase())}),e.forEach(r=>{le.add(r.toLowerCase())})}function Mt(t){const e=Array.isArray(t)?t:[t];t==="meta"?le.clear():e.forEach(r=>{le.delete(r.toLowerCase())})}function $n(t,e,r){(typeof r=="function"&&r(t,e)||r===!0)&&t.preventDefault()}function Kn(t,e,r){return typeof r=="function"?r(t,e):r===!0||r===void 0}const zn=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function Wn(t){return At(t,zn)}function At(t,e=!1){const{target:r,composed:s}=t;let a,c;return Gn(r)&&s?(a=t.composedPath()[0]&&t.composedPath()[0].tagName,c=t.composedPath()[0]&&t.composedPath()[0].role):(a=r&&r.tagName,c=r&&r.role),Ye(e)?!!(a&&e&&e.some(o=>o.toLowerCase()===a.toLowerCase()||o===c)):!!(a&&e&&e)}function Gn(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function qn(t,e){return t.length===0&&e?!1:e?t.some(r=>e.includes(r))||t.includes("*"):!0}const Vn=(t,e,r=!1)=>{const{alt:s,meta:a,mod:c,shift:o,ctrl:l,keys:p,useKey:y}=e,{code:u,key:w,ctrlKey:j,metaKey:M,shiftKey:N,altKey:_}=t,k=fe(u);if(y){if(p?.length===1&&p.includes(w.toLowerCase())){if(!r){if(s!==_||o!==N)return!1;if(c){if(!M&&!j)return!1}else if(a!==M||l!==j)return!1}return!0}return!1}if(!p?.includes(k)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(k))return!1;if(!r){if(s!==_&&k!=="alt"||o!==N&&k!=="shift")return!1;if(c){if(!M&&!j)return!1}else if(a!==M&&k!=="meta"&&k!=="os"||l!==j&&k!=="ctrl"&&k!=="control")return!1}return p&&p.length===1&&p.includes(k)?!0:p&&p.length>0?p.includes(k)?On(p):!1:!p||p.length===0},Un=I.createContext(void 0),Hn=()=>I.useContext(Un);function Yn(t,e){return t===e}const Zn=I.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),Qn=()=>I.useContext(Zn);function Jn(t){const e=I.useRef(void 0);return Yn(e.current,t)||(e.current=t),e.current}const ct=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},Xn=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Pe(t,e,r,s){const a=I.useRef(null),c=I.useRef(!1),o=Array.isArray(r)?Array.isArray(s)?void 0:s:r,l=Ye(t)?t.join(o?.delimiter):t,p=I.useCallback(e,[]),y=I.useRef(p);y.current=e;const u=Jn(o),{activeScopes:w}=Qn(),j=Hn();return Xn(()=>{if(u?.enabled===!1||!qn(w,u?.scopes))return;let M=[],N;const _=(L,Y=!1)=>{if(!(Wn(L)&&!At(L,u?.enableOnFormTags))){if(a.current!==null){const S=a.current.getRootNode();if((S instanceof Document||S instanceof ShadowRoot)&&S.activeElement!==a.current&&!a.current.contains(S.activeElement)){ct(L);return}}L.target?.isContentEditable&&!u?.enableOnContentEditable||Be(l,u?.delimiter).forEach(S=>{if(S.includes(u?.splitKey??"+")&&S.includes(u?.sequenceSplitKey??">")){console.warn(`Hotkey ${S} contains both ${u?.splitKey??"+"} and ${u?.sequenceSplitKey??">"} which is not supported.`);return}const B=_e(S,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata);if(B.isSequence){N=setTimeout(()=>{M=[]},u?.sequenceTimeoutMs??1e3);const P=B.useKey?L.key:fe(L.code);if(wt(P.toLowerCase()))return;M.push(P);const D=B.keys?.[M.length-1];if(P!==D){M=[],N&&clearTimeout(N);return}M.length===B.keys?.length&&(y.current(L,B),N&&clearTimeout(N),M=[])}else if(Vn(L,B,u?.ignoreModifiers)||B.keys?.includes("*")){if(u?.ignoreEventWhen?.(L)||Y&&c.current)return;if($n(L,B,u?.preventDefault),!Kn(L,B,u?.enabled)){ct(L);return}y.current(L,B),Y||(c.current=!0)}})}},k=L=>{L.code!==void 0&&(Ct(fe(L.code)),(u?.keydown===void 0&&u?.keyup!==!0||u?.keydown)&&_(L))},q=L=>{L.code!==void 0&&(Mt(fe(L.code)),c.current=!1,u?.keyup&&_(L,!0))},z=a.current||o?.document||document;return z.addEventListener("keyup",q,o?.eventListenerOptions),z.addEventListener("keydown",k,o?.eventListenerOptions),j&&Be(l,u?.delimiter).forEach(L=>{j.addHotkey(_e(L,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata))}),()=>{z.removeEventListener("keyup",q,o?.eventListenerOptions),z.removeEventListener("keydown",k,o?.eventListenerOptions),j&&Be(l,u?.delimiter).forEach(L=>{j.removeHotkey(_e(L,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata))}),M=[],N&&clearTimeout(N)}},[l,u,w]),a}var Ze={};(function t(e,r,s,a){var c=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=(function(){if(!e.OffscreenCanvas)return!1;try{var i=new OffscreenCanvas(1,1),n=i.getContext("2d");n.fillRect(0,0,1,1);var m=i.transferToImageBitmap();n.createPattern(m,"no-repeat")}catch{return!1}return!0})();function p(){}function y(i){var n=r.exports.Promise,m=n!==void 0?n:e.Promise;return typeof m=="function"?new m(i):(i(p,p),null)}var u=(function(i,n){return{transform:function(m){if(i)return m;if(n.has(m))return n.get(m);var g=new OffscreenCanvas(m.width,m.height),b=g.getContext("2d");return b.drawImage(m,0,0),n.set(m,g),g},clear:function(){n.clear()}}})(l,new Map),w=(function(){var i=Math.floor(16.666666666666668),n,m,g={},b=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(E){var A=Math.random();return g[A]=requestAnimationFrame(function v(C){b===C||b+i-1<C?(b=C,delete g[A],E()):g[A]=requestAnimationFrame(v)}),A},m=function(E){g[E]&&cancelAnimationFrame(g[E])}):(n=function(E){return setTimeout(E,i)},m=function(E){return clearTimeout(E)}),{frame:n,cancel:m}})(),j=(function(){var i,n,m={};function g(b){function E(A,v){b.postMessage({options:A||{},callback:v})}b.init=function(v){var C=v.transferControlToOffscreen();b.postMessage({canvas:C},[C])},b.fire=function(v,C,$){if(n)return E(v,null),n;var W=Math.random().toString(36).slice(2);return n=y(function(K){function d(R){R.data.callback===W&&(delete m[W],b.removeEventListener("message",d),n=null,u.clear(),$(),K())}b.addEventListener("message",d),E(v,W),m[W]=d.bind(null,{data:{callback:W}})}),n},b.reset=function(){b.postMessage({reset:!0});for(var v in m)m[v](),delete m[v]}}return function(){if(i)return i;if(!s&&c){var b=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([b])))}catch(E){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",E),null}g(i)}return i}})(),M={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function N(i,n){return n?n(i):i}function _(i){return i!=null}function k(i,n,m){return N(i&&_(i[n])?i[n]:M[n],m)}function q(i){return i<0?0:Math.floor(i)}function z(i,n){return Math.floor(Math.random()*(n-i))+i}function L(i){return parseInt(i,16)}function Y(i){return i.map(S)}function S(i){var n=String(i).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:L(n.substring(0,2)),g:L(n.substring(2,4)),b:L(n.substring(4,6))}}function B(i){var n=k(i,"origin",Object);return n.x=k(n,"x",Number),n.y=k(n,"y",Number),n}function P(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function D(i){var n=i.getBoundingClientRect();i.width=n.width,i.height=n.height}function O(i){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=i,n}function J(i,n,m,g,b,E,A,v,C){i.save(),i.translate(n,m),i.rotate(E),i.scale(g,b),i.arc(0,0,1,A,v,C),i.restore()}function U(i){var n=i.angle*(Math.PI/180),m=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-n+(.5*m-Math.random()*m),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar,flat:i.flat}}function G(i,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var m=n.tick++/n.totalTicks,g=n.x+n.random*n.tiltCos,b=n.y+n.random*n.tiltSin,E=n.wobbleX+n.random*n.tiltCos,A=n.wobbleY+n.random*n.tiltSin;if(i.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-m)+")",i.beginPath(),o&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))i.fill(se(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(E-g)*.1,Math.abs(A-b)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var v=Math.PI/10*n.wobble,C=Math.abs(E-g)*.1,$=Math.abs(A-b)*.1,W=n.shape.bitmap.width*n.scalar,K=n.shape.bitmap.height*n.scalar,d=new DOMMatrix([Math.cos(v)*C,Math.sin(v)*C,-Math.sin(v)*$,Math.cos(v)*$,n.x,n.y]);d.multiplySelf(new DOMMatrix(n.shape.matrix));var R=i.createPattern(u.transform(n.shape.bitmap),"no-repeat");R.setTransform(d),i.globalAlpha=1-m,i.fillStyle=R,i.fillRect(n.x-W/2,n.y-K/2,W,K),i.globalAlpha=1}else if(n.shape==="circle")i.ellipse?i.ellipse(n.x,n.y,Math.abs(E-g)*n.ovalScalar,Math.abs(A-b)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):J(i,n.x,n.y,Math.abs(E-g)*n.ovalScalar,Math.abs(A-b)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var x=Math.PI/2*3,F=4*n.scalar,Z=8*n.scalar,te=n.x,Q=n.y,ae=5,re=Math.PI/ae;ae--;)te=n.x+Math.cos(x)*Z,Q=n.y+Math.sin(x)*Z,i.lineTo(te,Q),x+=re,te=n.x+Math.cos(x)*F,Q=n.y+Math.sin(x)*F,i.lineTo(te,Q),x+=re;else i.moveTo(Math.floor(n.x),Math.floor(n.y)),i.lineTo(Math.floor(n.wobbleX),Math.floor(b)),i.lineTo(Math.floor(E),Math.floor(A)),i.lineTo(Math.floor(g),Math.floor(n.wobbleY));return i.closePath(),i.fill(),n.tick<n.totalTicks}function X(i,n,m,g,b){var E=n.slice(),A=i.getContext("2d"),v,C,$=y(function(W){function K(){v=C=null,A.clearRect(0,0,g.width,g.height),u.clear(),b(),W()}function d(){s&&!(g.width===a.width&&g.height===a.height)&&(g.width=i.width=a.width,g.height=i.height=a.height),!g.width&&!g.height&&(m(i),g.width=i.width,g.height=i.height),A.clearRect(0,0,g.width,g.height),E=E.filter(function(R){return G(A,R)}),E.length?v=w.frame(d):K()}v=w.frame(d),C=K});return{addFettis:function(W){return E=E.concat(W),$},canvas:i,promise:$,reset:function(){v&&w.cancel(v),C&&C()}}}function V(i,n){var m=!i,g=!!k(n||{},"resize"),b=!1,E=k(n,"disableForReducedMotion",Boolean),A=c&&!!k(n||{},"useWorker"),v=A?j():null,C=m?P:D,$=i&&v?!!i.__confetti_initialized:!1,W=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,K;function d(x,F,Z){for(var te=k(x,"particleCount",q),Q=k(x,"angle",Number),ae=k(x,"spread",Number),re=k(x,"startVelocity",Number),Je=k(x,"decay",Number),de=k(x,"gravity",Number),_t=k(x,"drift",Number),Xe=k(x,"colors",Y),Pt=k(x,"ticks",Number),et=k(x,"shapes"),Ot=k(x,"scalar"),$t=!!k(x,"flat"),tt=B(x),nt=te,Fe=[],Kt=i.width*tt.x,zt=i.height*tt.y;nt--;)Fe.push(U({x:Kt,y:zt,angle:Q,spread:ae,startVelocity:re,color:Xe[nt%Xe.length],shape:et[z(0,et.length)],ticks:Pt,decay:Je,gravity:de,drift:_t,scalar:Ot,flat:$t}));return K?K.addFettis(Fe):(K=X(i,Fe,C,F,Z),K.promise)}function R(x){var F=E||k(x,"disableForReducedMotion",Boolean),Z=k(x,"zIndex",Number);if(F&&W)return y(function(re){re()});m&&K?i=K.canvas:m&&!i&&(i=O(Z),document.body.appendChild(i)),g&&!$&&C(i);var te={width:i.width,height:i.height};v&&!$&&v.init(i),$=!0,v&&(i.__confetti_initialized=!0);function Q(){if(v){var re={getBoundingClientRect:function(){if(!m)return i.getBoundingClientRect()}};C(re),v.postMessage({resize:{width:re.width,height:re.height}});return}te.width=te.height=null}function ae(){K=null,g&&(b=!1,e.removeEventListener("resize",Q)),m&&i&&(document.body.contains(i)&&document.body.removeChild(i),i=null,$=!1)}return g&&!b&&(b=!0,e.addEventListener("resize",Q,!1)),v?v.fire(x,te,ae):d(x,te,ae)}return R.reset=function(){v&&v.reset(),K&&K.reset()},R}var H;function ee(){return H||(H=V(null,{useWorker:!0,resize:!0})),H}function se(i,n,m,g,b,E,A){var v=new Path2D(i),C=new Path2D;C.addPath(v,new DOMMatrix(n));var $=new Path2D;return $.addPath(C,new DOMMatrix([Math.cos(A)*b,Math.sin(A)*b,-Math.sin(A)*E,Math.cos(A)*E,m,g])),$}function ne(i){if(!o)throw new Error("path confetti are not supported in this browser");var n,m;typeof i=="string"?n=i:(n=i.path,m=i.matrix);var g=new Path2D(n),b=document.createElement("canvas"),E=b.getContext("2d");if(!m){for(var A=1e3,v=A,C=A,$=0,W=0,K,d,R=0;R<A;R+=2)for(var x=0;x<A;x+=2)E.isPointInPath(g,R,x,"nonzero")&&(v=Math.min(v,R),C=Math.min(C,x),$=Math.max($,R),W=Math.max(W,x));K=$-v,d=W-C;var F=10,Z=Math.min(F/K,F/d);m=[Z,0,0,Z,-Math.round(K/2+v)*Z,-Math.round(d/2+C)*Z]}return{type:"path",path:n,matrix:m}}function f(i){var n,m=1,g="#000000",b='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof i=="string"?n=i:(n=i.text,m="scalar"in i?i.scalar:m,b="fontFamily"in i?i.fontFamily:b,g="color"in i?i.color:g);var E=10*m,A=""+E+"px "+b,v=new OffscreenCanvas(E,E),C=v.getContext("2d");C.font=A;var $=C.measureText(n),W=Math.ceil($.actualBoundingBoxRight+$.actualBoundingBoxLeft),K=Math.ceil($.actualBoundingBoxAscent+$.actualBoundingBoxDescent),d=2,R=$.actualBoundingBoxLeft+d,x=$.actualBoundingBoxAscent+d;W+=d+d,K+=d+d,v=new OffscreenCanvas(W,K),C=v.getContext("2d"),C.font=A,C.fillStyle=g,C.fillText(n,R,x);var F=1/m;return{type:"bitmap",bitmap:v.transferToImageBitmap(),matrix:[F,0,0,F,-W*F/2,-K*F/2]}}r.exports=function(){return ee().apply(this,arguments)},r.exports.reset=function(){ee().reset()},r.exports.create=V,r.exports.shapeFromPath=ne,r.exports.shapeFromText=f})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Ze,!1);const ut=Ze.exports;Ze.exports.create;function lt(t,e,r,s,a,c,o){try{var l=t[c](o),p=l.value}catch(y){r(y);return}l.done?e(p):Promise.resolve(p).then(s,a)}function ve(t){return function(){var e=this,r=arguments;return new Promise(function(s,a){var c=t.apply(e,r);function o(p){lt(c,s,a,o,l,"next",p)}function l(p){lt(c,s,a,o,l,"throw",p)}o(void 0)})}}var Oe,ht;function er(){if(ht)return Oe;ht=1;var t="Expected a function",e=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,p=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,y=typeof self=="object"&&self&&self.Object===Object&&self,u=p||y||Function("return this")(),w=Object.prototype,j=w.toString,M=Math.max,N=Math.min,_=function(){return u.Date.now()};function k(S,B,P){var D,O,J,U,G,X,V=0,H=!1,ee=!1,se=!0;if(typeof S!="function")throw new TypeError(t);B=Y(B)||0,q(P)&&(H=!!P.leading,ee="maxWait"in P,J=ee?M(Y(P.maxWait)||0,B):J,se="trailing"in P?!!P.trailing:se);function ne(v){var C=D,$=O;return D=O=void 0,V=v,U=S.apply($,C),U}function f(v){return V=v,G=setTimeout(m,B),H?ne(v):U}function i(v){var C=v-X,$=v-V,W=B-C;return ee?N(W,J-$):W}function n(v){var C=v-X,$=v-V;return X===void 0||C>=B||C<0||ee&&$>=J}function m(){var v=_();if(n(v))return g(v);G=setTimeout(m,i(v))}function g(v){return G=void 0,se&&D?ne(v):(D=O=void 0,U)}function b(){G!==void 0&&clearTimeout(G),V=0,D=X=O=G=void 0}function E(){return G===void 0?U:g(_())}function A(){var v=_(),C=n(v);if(D=arguments,O=this,X=v,C){if(G===void 0)return f(X);if(ee)return G=setTimeout(m,B),ne(X)}return G===void 0&&(G=setTimeout(m,B)),U}return A.cancel=b,A.flush=E,A}function q(S){var B=typeof S;return!!S&&(B=="object"||B=="function")}function z(S){return!!S&&typeof S=="object"}function L(S){return typeof S=="symbol"||z(S)&&j.call(S)==r}function Y(S){if(typeof S=="number")return S;if(L(S))return e;if(q(S)){var B=typeof S.valueOf=="function"?S.valueOf():S;S=q(B)?B+"":B}if(typeof S!="string")return S===0?S:+S;S=S.replace(s,"");var P=c.test(S);return P||o.test(S)?l(S.slice(2),P?2:8):a.test(S)?e:+S}return Oe=k,Oe}var tr=er();const nr=Wt(tr),xe=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),rr=t=>t===xe;var je=(()=>/(android)/i.test(typeof navigator<"u"?navigator.userAgent:""));const Le=(...t)=>t.map(e=>e.trim()).join(" ").trim(),ir=/\s*\((.*?)\)\s*/g,sr=/(\(\?:[^)]+\))\?/g,ar=/(\(\?)?:\w+/g,or=/\*/g,cr=/[-{}[\]+?.,\\^$|#]/g,ur=t=>t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(cr,"\\$&").replace(ir,"(?:$1)?").replace(ar,(e,r)=>r?e:"([^\\s]+)").replace(or,"(.*?)").replace(sr,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")),lr=(t,e)=>{if(t=t.replace(/\s+/g,"").toLowerCase(),e=e.replace(/\s+/g,"").toLowerCase(),!t.length&&!e.length)return 1;if(!t.length||!e.length)return 0;if(t===e)return 1;if(t.length===1&&e.length===1||t.length<2||e.length<2)return 0;const r=new Map;for(let a=0;a<t.length-1;a++){const c=t.substring(a,a+2),o=r.has(c)?r.get(c)+1:1;r.set(c,o)}let s=0;for(let a=0;a<e.length-1;a++){const c=e.substring(a,a+2),o=r.has(c)?r.get(c):0;o>0&&(r.set(c,o-1),s++)}return 2*s/(t.length+e.length-2)},St=()=>typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0);class $e{setSpeechRecognition(e){const r=!!e&&(rr(e)||St());r&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(r)}subscribe(e,r){this.subscribers[e]=r}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach(r=>{const{onListeningChange:s}=this.subscribers[r];s(e)})}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach(r=>{const{onMicrophoneAvailabilityChange:s}=this.subscribers[r];s(e)})}emitTranscriptChange(e,r){Object.keys(this.subscribers).forEach(s=>{const{onTranscriptChange:a}=this.subscribers[s];a(e,r)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(e=>{const{onClearTranscript:r}=this.subscribers[e];r()})}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach(r=>{const{onBrowserSupportsSpeechRecognitionChange:s,onBrowserSupportsContinuousListeningChange:a}=this.subscribers[r];s(e),a(e)})}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&e.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results:e,resultIndex:r}){const s=r===void 0?e.length-1:r;this.interimTranscript="",this.finalTranscript="";for(let c=s;c<e.length;++c)e[c].isFinal&&(!je()||e[c][0].confidence>0)?this.updateFinalTranscript(e[c][0].transcript):this.interimTranscript=Le(this.interimTranscript,e[c][0].transcript);let a=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(a=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,a||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=Le(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return ve(function*({continuous:e=!1,language:r}={}){if(!this.recognition)return;const s=e!==this.recognition.continuous,a=r&&r!==this.recognition.lang;if((s||a)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=s?e:this.recognition.continuous,this.recognition.lang=a?r:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(c){c instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return ve(function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}stopListening(){return ve(function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}getRecognition(){return this.recognition}start(){return ve(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),je()&&(this.updateFinalTranscript=nr(this.updateFinalTranscript,250,{leading:!0}))}}const Et="CLEAR_TRANSCRIPT",kt="APPEND_TRANSCRIPT",hr=()=>({type:Et}),dr=(t,e)=>({type:kt,payload:{interimTranscript:t,finalTranscript:e}}),fr=(t,e)=>{switch(e.type){case Et:return{interimTranscript:"",finalTranscript:""};case kt:return{interimTranscript:e.payload.interimTranscript,finalTranscript:Le(t.finalTranscript,e.payload.finalTranscript)};default:throw new Error}};let we=!!xe,Ee=we&&!je(),ue;const pr=({transcribing:t=!0,clearTranscriptOnListen:e=!0,commands:r=[]}={})=>{const[s]=I.useState(be.getRecognitionManager()),[a,c]=I.useState(we),[o,l]=I.useState(Ee),[{interimTranscript:p,finalTranscript:y},u]=I.useReducer(fr,{interimTranscript:s.interimTranscript,finalTranscript:""}),[w,j]=I.useState(s.listening),[M,N]=I.useState(s.isMicrophoneAvailable),_=I.useRef(r);_.current=r;const k=()=>{u(hr())},q=I.useCallback(()=>{s.resetTranscript(),k()},[s]),z=(D,O,J)=>{const G=(typeof D=="object"?D.toString():D).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),X=lr(G,O);return X>=J?{command:D,commandWithoutSpecials:G,howSimilar:X,isFuzzyMatch:!0}:null},L=(D,O)=>{const U=ur(D).exec(O);return U?{command:D,parameters:U.slice(1)}:null},Y=I.useCallback((D,O)=>{_.current.forEach(({command:J,callback:U,matchInterim:G=!1,isFuzzyMatch:X=!1,fuzzyMatchingThreshold:V=.8,bestMatchOnly:H=!1})=>{const ee=!O&&G?D.trim():O.trim(),ne=(Array.isArray(J)?J:[J]).map(f=>X?z(f,ee,V):L(f,ee)).filter(f=>f);if(X&&H&&ne.length>=2){ne.sort((m,g)=>g.howSimilar-m.howSimilar);const{command:f,commandWithoutSpecials:i,howSimilar:n}=ne[0];U(i,ee,n,{command:f,resetTranscript:q})}else ne.forEach(f=>{if(f.isFuzzyMatch){const{command:i,commandWithoutSpecials:n,howSimilar:m}=f;U(n,ee,m,{command:i,resetTranscript:q})}else{const{command:i,parameters:n}=f;U(...n,{command:i,resetTranscript:q})}})})},[q]),S=I.useCallback((D,O)=>{t&&u(dr(D,O)),Y(D,O)},[Y,t]),B=I.useCallback(()=>{e&&k()},[e]);return I.useEffect(()=>{const D=be.counter;be.counter+=1;const O={onListeningChange:j,onMicrophoneAvailabilityChange:N,onTranscriptChange:S,onClearTranscript:B,onBrowserSupportsSpeechRecognitionChange:c,onBrowserSupportsContinuousListeningChange:l};return s.subscribe(D,O),()=>{s.unsubscribe(D)}},[t,e,s,S,B]),{transcript:Le(y,p),interimTranscript:p,finalTranscript:y,listening:w,isMicrophoneAvailable:M,resetTranscript:q,browserSupportsSpeechRecognition:a,browserSupportsContinuousListening:o}},be={counter:0,applyPolyfill:t=>{ue?ue.setSpeechRecognition(t):ue=new $e(t);const e=!!t&&St();we=e,Ee=e},removePolyfill:()=>{ue?ue.setSpeechRecognition(xe):ue=new $e(xe),we=!!xe,Ee=we&&!je()},getRecognitionManager:()=>(ue||(ue=new $e(xe)),ue),getRecognition:()=>be.getRecognitionManager().getRecognition(),startListening:({continuous:t,language:e}={})=>ve(function*(){yield be.getRecognitionManager().startListening({continuous:t,language:e})})(),stopListening:()=>ve(function*(){yield be.getRecognitionManager().stopListening()})(),abortListening:()=>ve(function*(){yield be.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>we,browserSupportsContinuousListening:()=>Ee};function mr(){const t=I.useCallback((o,l,p)=>{const y=new(window.AudioContext||window.webkitAudioContext),u=y.createOscillator(),w=y.createGain();u.type=l,u.frequency.setValueAtTime(o,y.currentTime),w.gain.setValueAtTime(.1,y.currentTime),w.gain.exponentialRampToValueAtTime(1e-5,y.currentTime+p),u.connect(w),w.connect(y.destination),u.start(),u.stop(y.currentTime+p)},[]);return{playSuccess:()=>{t(1200,"sine",.1),setTimeout(()=>t(1600,"sine",.2),100)},playAdd:()=>{t(600,"triangle",.1)},playRemove:()=>{t(150,"sawtooth",.15)},playError:()=>{t(150,"square",.1),setTimeout(()=>t(100,"square",.2),100)},speak:o=>{if("speechSynthesis"in window){const l=new SpeechSynthesisUtterance(o);l.lang="id-ID",l.rate=1.1,window.speechSynthesis.speak(l)}}}}function he(t){return Array.isArray?Array.isArray(t):Tt(t)==="[object Array]"}function gr(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function yr(t){return t==null?"":gr(t)}function ce(t){return typeof t=="string"}function jt(t){return typeof t=="number"}function vr(t){return t===!0||t===!1||br(t)&&Tt(t)=="[object Boolean]"}function Lt(t){return typeof t=="object"}function br(t){return Lt(t)&&t!==null}function ie(t){return t!=null}function Ke(t){return!t.trim().length}function Tt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xr="Incorrect 'index' type",wr=t=>`Invalid value for key ${t}`,Cr=t=>`Pattern length exceeds max of ${t}.`,Mr=t=>`Missing ${t} property in key`,Ar=t=>`Property 'weight' in key '${t}' must be a positive integer`,dt=Object.prototype.hasOwnProperty;class Sr{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(s=>{let a=Nt(s);this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(s=>{s.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Nt(t){let e=null,r=null,s=null,a=1,c=null;if(ce(t)||he(t))s=t,e=ft(t),r=We(t);else{if(!dt.call(t,"name"))throw new Error(Mr("name"));const o=t.name;if(s=o,dt.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(Ar(o));e=ft(o),r=We(o),c=t.getFn}return{path:e,id:r,weight:a,src:s,getFn:c}}function ft(t){return he(t)?t:t.split(".")}function We(t){return he(t)?t.join("."):t}function Er(t,e){let r=[],s=!1;const a=(c,o,l)=>{if(ie(c))if(!o[l])r.push(c);else{let p=o[l];const y=c[p];if(!ie(y))return;if(l===o.length-1&&(ce(y)||jt(y)||vr(y)))r.push(yr(y));else if(he(y)){s=!0;for(let u=0,w=y.length;u<w;u+=1)a(y[u],o,l+1)}else o.length&&a(y,o,l+1)}};return a(t,ce(e)?e.split("."):e,0),s?r:r[0]}const kr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},jr={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Lr={location:0,threshold:.6,distance:100},Tr={useExtendedSearch:!1,getFn:Er,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var T={...jr,...kr,...Lr,...Tr};const Nr=/[^ ]+/g;function Fr(t=1,e=3){const r=new Map,s=Math.pow(10,e);return{get(a){const c=a.match(Nr).length;if(r.has(c))return r.get(c);const o=1/Math.pow(c,.5*t),l=parseFloat(Math.round(o*s)/s);return r.set(c,l),l},clear(){r.clear()}}}class Qe{constructor({getFn:e=T.getFn,fieldNormWeight:r=T.fieldNormWeight}={}){this.norm=Fr(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ce(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();ce(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!ie(e)||Ke(e))return;let s={v:e,i:r,n:this.norm.get(e)};this.records.push(s)}_addObject(e,r){let s={i:r,$:{}};this.keys.forEach((a,c)=>{let o=a.getFn?a.getFn(e):this.getFn(e,a.path);if(ie(o)){if(he(o)){let l=[];const p=[{nestedArrIndex:-1,value:o}];for(;p.length;){const{nestedArrIndex:y,value:u}=p.pop();if(ie(u))if(ce(u)&&!Ke(u)){let w={v:u,i:y,n:this.norm.get(u)};l.push(w)}else he(u)&&u.forEach((w,j)=>{p.push({nestedArrIndex:j,value:w})})}s.$[c]=l}else if(ce(o)&&!Ke(o)){let l={v:o,n:this.norm.get(o)};s.$[c]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Ft(t,e,{getFn:r=T.getFn,fieldNormWeight:s=T.fieldNormWeight}={}){const a=new Qe({getFn:r,fieldNormWeight:s});return a.setKeys(t.map(Nt)),a.setSources(e),a.create(),a}function Rr(t,{getFn:e=T.getFn,fieldNormWeight:r=T.fieldNormWeight}={}){const{keys:s,records:a}=t,c=new Qe({getFn:e,fieldNormWeight:r});return c.setKeys(s),c.setIndexRecords(a),c}function Se(t,{errors:e=0,currentLocation:r=0,expectedLocation:s=0,distance:a=T.distance,ignoreLocation:c=T.ignoreLocation}={}){const o=e/t.length;if(c)return o;const l=Math.abs(s-r);return a?o+l/a:l?1:o}function Ir(t=[],e=T.minMatchCharLength){let r=[],s=-1,a=-1,c=0;for(let o=t.length;c<o;c+=1){let l=t[c];l&&s===-1?s=c:!l&&s!==-1&&(a=c-1,a-s+1>=e&&r.push([s,a]),s=-1)}return t[c-1]&&c-s>=e&&r.push([s,c-1]),r}const ye=32;function Dr(t,e,r,{location:s=T.location,distance:a=T.distance,threshold:c=T.threshold,findAllMatches:o=T.findAllMatches,minMatchCharLength:l=T.minMatchCharLength,includeMatches:p=T.includeMatches,ignoreLocation:y=T.ignoreLocation}={}){if(e.length>ye)throw new Error(Cr(ye));const u=e.length,w=t.length,j=Math.max(0,Math.min(s,w));let M=c,N=j;const _=l>1||p,k=_?Array(w):[];let q;for(;(q=t.indexOf(e,N))>-1;){let P=Se(e,{currentLocation:q,expectedLocation:j,distance:a,ignoreLocation:y});if(M=Math.min(P,M),N=q+u,_){let D=0;for(;D<u;)k[q+D]=1,D+=1}}N=-1;let z=[],L=1,Y=u+w;const S=1<<u-1;for(let P=0;P<u;P+=1){let D=0,O=Y;for(;D<O;)Se(e,{errors:P,currentLocation:j+O,expectedLocation:j,distance:a,ignoreLocation:y})<=M?D=O:Y=O,O=Math.floor((Y-D)/2+D);Y=O;let J=Math.max(1,j-O+1),U=o?w:Math.min(j+O,w)+u,G=Array(U+2);G[U+1]=(1<<P)-1;for(let V=U;V>=J;V-=1){let H=V-1,ee=r[t.charAt(H)];if(_&&(k[H]=+!!ee),G[V]=(G[V+1]<<1|1)&ee,P&&(G[V]|=(z[V+1]|z[V])<<1|1|z[V+1]),G[V]&S&&(L=Se(e,{errors:P,currentLocation:H,expectedLocation:j,distance:a,ignoreLocation:y}),L<=M)){if(M=L,N=H,N<=j)break;J=Math.max(1,2*j-N)}}if(Se(e,{errors:P+1,currentLocation:j,expectedLocation:j,distance:a,ignoreLocation:y})>M)break;z=G}const B={isMatch:N>=0,score:Math.max(.001,L)};if(_){const P=Ir(k,l);P.length?p&&(B.indices=P):B.isMatch=!1}return B}function Br(t){let e={};for(let r=0,s=t.length;r<s;r+=1){const a=t.charAt(r);e[a]=(e[a]||0)|1<<s-r-1}return e}const Te=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class Rt{constructor(e,{location:r=T.location,threshold:s=T.threshold,distance:a=T.distance,includeMatches:c=T.includeMatches,findAllMatches:o=T.findAllMatches,minMatchCharLength:l=T.minMatchCharLength,isCaseSensitive:p=T.isCaseSensitive,ignoreDiacritics:y=T.ignoreDiacritics,ignoreLocation:u=T.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:a,includeMatches:c,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:p,ignoreDiacritics:y,ignoreLocation:u},e=p?e:e.toLowerCase(),e=y?Te(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const w=(M,N)=>{this.chunks.push({pattern:M,alphabet:Br(M),startIndex:N})},j=this.pattern.length;if(j>ye){let M=0;const N=j%ye,_=j-N;for(;M<_;)w(this.pattern.substr(M,ye),M),M+=ye;if(N){const k=j-ye;w(this.pattern.substr(k),k)}}else w(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a}=this.options;if(e=r?e:e.toLowerCase(),e=s?Te(e):e,this.pattern===e){let _={isMatch:!0,score:0};return a&&(_.indices=[[0,e.length-1]]),_}const{location:c,distance:o,threshold:l,findAllMatches:p,minMatchCharLength:y,ignoreLocation:u}=this.options;let w=[],j=0,M=!1;this.chunks.forEach(({pattern:_,alphabet:k,startIndex:q})=>{const{isMatch:z,score:L,indices:Y}=Dr(e,_,k,{location:c+q,distance:o,threshold:l,findAllMatches:p,minMatchCharLength:y,includeMatches:a,ignoreLocation:u});z&&(M=!0),j+=L,z&&Y&&(w=[...w,...Y])});let N={isMatch:M,score:M?j/this.chunks.length:1};return M&&a&&(N.indices=w),N}}class me{constructor(e){this.pattern=e}static isMultiMatch(e){return pt(e,this.multiRegex)}static isSingleMatch(e){return pt(e,this.singleRegex)}search(){}}function pt(t,e){const r=t.match(e);return r?r[1]:null}class _r extends me{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Pr extends me{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Or extends me{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class $r extends me{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Kr extends me{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class zr extends me{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class It extends me{constructor(e,{location:r=T.location,threshold:s=T.threshold,distance:a=T.distance,includeMatches:c=T.includeMatches,findAllMatches:o=T.findAllMatches,minMatchCharLength:l=T.minMatchCharLength,isCaseSensitive:p=T.isCaseSensitive,ignoreDiacritics:y=T.ignoreDiacritics,ignoreLocation:u=T.ignoreLocation}={}){super(e),this._bitapSearch=new Rt(e,{location:r,threshold:s,distance:a,includeMatches:c,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:p,ignoreDiacritics:y,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Dt extends me{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,s;const a=[],c=this.pattern.length;for(;(s=e.indexOf(this.pattern,r))>-1;)r=s+c,a.push([s,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const Ge=[_r,Dt,Or,$r,zr,Kr,Pr,It],mt=Ge.length,Wr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Gr="|";function qr(t,e={}){return t.split(Gr).map(r=>{let s=r.trim().split(Wr).filter(c=>c&&!!c.trim()),a=[];for(let c=0,o=s.length;c<o;c+=1){const l=s[c];let p=!1,y=-1;for(;!p&&++y<mt;){const u=Ge[y];let w=u.isMultiMatch(l);w&&(a.push(new u(w,e)),p=!0)}if(!p)for(y=-1;++y<mt;){const u=Ge[y];let w=u.isSingleMatch(l);if(w){a.push(new u(w,e));break}}}return a})}const Vr=new Set([It.type,Dt.type]);class Ur{constructor(e,{isCaseSensitive:r=T.isCaseSensitive,ignoreDiacritics:s=T.ignoreDiacritics,includeMatches:a=T.includeMatches,minMatchCharLength:c=T.minMatchCharLength,ignoreLocation:o=T.ignoreLocation,findAllMatches:l=T.findAllMatches,location:p=T.location,threshold:y=T.threshold,distance:u=T.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a,minMatchCharLength:c,findAllMatches:l,ignoreLocation:o,location:p,threshold:y,distance:u},e=r?e:e.toLowerCase(),e=s?Te(e):e,this.pattern=e,this.query=qr(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:a,ignoreDiacritics:c}=this.options;e=a?e:e.toLowerCase(),e=c?Te(e):e;let o=0,l=[],p=0;for(let y=0,u=r.length;y<u;y+=1){const w=r[y];l.length=0,o=0;for(let j=0,M=w.length;j<M;j+=1){const N=w[j],{isMatch:_,indices:k,score:q}=N.search(e);if(_){if(o+=1,p+=q,s){const z=N.constructor.type;Vr.has(z)?l=[...l,...k]:l.push(k)}}else{p=0,o=0,l.length=0;break}}if(o){let j={isMatch:!0,score:p/o};return s&&(j.indices=l),j}}return{isMatch:!1,score:1}}}const qe=[];function Hr(...t){qe.push(...t)}function Ve(t,e){for(let r=0,s=qe.length;r<s;r+=1){let a=qe[r];if(a.condition(t,e))return new a(t,e)}return new Rt(t,e)}const Ne={AND:"$and",OR:"$or"},Ue={PATH:"$path",PATTERN:"$val"},He=t=>!!(t[Ne.AND]||t[Ne.OR]),Yr=t=>!!t[Ue.PATH],Zr=t=>!he(t)&&Lt(t)&&!He(t),gt=t=>({[Ne.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Bt(t,e,{auto:r=!0}={}){const s=a=>{let c=Object.keys(a);const o=Yr(a);if(!o&&c.length>1&&!He(a))return s(gt(a));if(Zr(a)){const p=o?a[Ue.PATH]:c[0],y=o?a[Ue.PATTERN]:a[p];if(!ce(y))throw new Error(wr(p));const u={keyId:We(p),pattern:y};return r&&(u.searcher=Ve(y,e)),u}let l={children:[],operator:c[0]};return c.forEach(p=>{const y=a[p];he(y)&&y.forEach(u=>{l.children.push(s(u))})}),l};return He(t)||(t=gt(t)),s(t)}function Qr(t,{ignoreFieldNorm:e=T.ignoreFieldNorm}){t.forEach(r=>{let s=1;r.matches.forEach(({key:a,norm:c,score:o})=>{const l=a?a.weight:null;s*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:c))}),r.score=s})}function Jr(t,e){const r=t.matches;e.matches=[],ie(r)&&r.forEach(s=>{if(!ie(s.indices)||!s.indices.length)return;const{indices:a,value:c}=s;let o={indices:a,value:c};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function Xr(t,e){e.score=t.score}function ei(t,e,{includeMatches:r=T.includeMatches,includeScore:s=T.includeScore}={}){const a=[];return r&&a.push(Jr),s&&a.push(Xr),t.map(c=>{const{idx:o}=c,l={item:e[o],refIndex:o};return a.length&&a.forEach(p=>{p(c,l)}),l})}class pe{constructor(e,r={},s){this.options={...T,...r},this.options.useExtendedSearch,this._keyStore=new Sr(this.options.keys),this.setCollection(e,s)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Qe))throw new Error(xr);this._myIndex=r||Ft(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ie(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let s=0,a=this._docs.length;s<a;s+=1){const c=this._docs[s];e(c,s)&&(this.removeAt(s),s-=1,a-=1,r.push(c))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:s,includeScore:a,shouldSort:c,sortFn:o,ignoreFieldNorm:l}=this.options;let p=ce(e)?ce(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Qr(p,{ignoreFieldNorm:l}),c&&p.sort(o),jt(r)&&r>-1&&(p=p.slice(0,r)),ei(p,this._docs,{includeMatches:s,includeScore:a})}_searchStringList(e){const r=Ve(e,this.options),{records:s}=this._myIndex,a=[];return s.forEach(({v:c,i:o,n:l})=>{if(!ie(c))return;const{isMatch:p,score:y,indices:u}=r.searchIn(c);p&&a.push({item:c,idx:o,matches:[{score:y,value:c,norm:l,indices:u}]})}),a}_searchLogical(e){const r=Bt(e,this.options),s=(l,p,y)=>{if(!l.children){const{keyId:w,searcher:j}=l,M=this._findMatches({key:this._keyStore.get(w),value:this._myIndex.getValueForItemAtKeyId(p,w),searcher:j});return M&&M.length?[{idx:y,item:p,matches:M}]:[]}const u=[];for(let w=0,j=l.children.length;w<j;w+=1){const M=l.children[w],N=s(M,p,y);if(N.length)u.push(...N);else if(l.operator===Ne.AND)return[]}return u},a=this._myIndex.records,c={},o=[];return a.forEach(({$:l,i:p})=>{if(ie(l)){let y=s(r,l,p);y.length&&(c[p]||(c[p]={idx:p,item:l,matches:[]},o.push(c[p])),y.forEach(({matches:u})=>{c[p].matches.push(...u)}))}}),o}_searchObjectList(e){const r=Ve(e,this.options),{keys:s,records:a}=this._myIndex,c=[];return a.forEach(({$:o,i:l})=>{if(!ie(o))return;let p=[];s.forEach((y,u)=>{p.push(...this._findMatches({key:y,value:o[u],searcher:r}))}),p.length&&c.push({idx:l,item:o,matches:p})}),c}_findMatches({key:e,value:r,searcher:s}){if(!ie(r))return[];let a=[];if(he(r))r.forEach(({v:c,i:o,n:l})=>{if(!ie(c))return;const{isMatch:p,score:y,indices:u}=s.searchIn(c);p&&a.push({score:y,key:e,value:c,idx:o,norm:l,indices:u})});else{const{v:c,n:o}=r,{isMatch:l,score:p,indices:y}=s.searchIn(c);l&&a.push({score:p,key:e,value:c,norm:o,indices:y})}return a}}pe.version="7.1.0";pe.createIndex=Ft;pe.parseIndex=Rr;pe.config=T;pe.parseQuery=Bt;Hr(Ur);function ti({value:t}){return h.jsx(Ce.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},t)}function ni({item:t,updateQty:e,removeItem:r}){const s=vt(0),a=ze(s,[-100,0],[0,1]);return h.jsxs(Ce.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:100,height:0},style:{x:s,opacity:a},drag:"x",dragConstraints:{left:-100,right:0},onDragEnd:(c,{offset:o})=>{o.x<-80&&r(t.serviceId)},className:"relative touch-none",children:[h.jsxs(Ce.div,{style:{opacity:ze(s,[-50,0],[1,0])},className:"absolute right-0 top-0 bottom-0 flex items-center justify-end pr-4 text-red-500 font-bold text-xs",children:["LEPAS UNTUK HAPUS ",h.jsx(Mn,{className:"ml-1 h-4 w-4"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-background p-3 rounded-lg shadow-sm border border-slate-100 dark:border-slate-800 relative z-10",children:[h.jsxs("div",{className:"flex-1 mr-2",children:[h.jsx("div",{className:"font-medium text-sm line-clamp-1",title:t.name,children:t.name}),h.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.price)," / ",t.unit]})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("div",{className:"flex items-center bg-muted rounded-md h-8 shadow-inner",children:[h.jsx("button",{onClick:()=>e(t.serviceId,-.5),className:"w-8 h-full flex items-center justify-center hover:bg-background rounded-l-md transition-colors text-muted-foreground hover:text-foreground active:scale-90",children:h.jsx(Nn,{className:"h-3 w-3"})}),h.jsx(Ce.span,{initial:{scale:1.2},animate:{scale:1},className:"text-sm font-mono w-8 text-center",children:t.qty},t.qty),h.jsx("button",{onClick:()=>e(t.serviceId,.5),className:"w-8 h-full flex items-center justify-center hover:bg-background rounded-r-md transition-colors text-muted-foreground hover:text-foreground active:scale-90",children:h.jsx(yt,{className:"h-3 w-3"})})]})}),h.jsx("div",{className:"text-right min-w-[70px] ml-2",children:h.jsx("div",{className:"font-semibold text-sm",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.price*t.qty)})})]})]})}function ri({customers:t,services:e,promotions:r}){const{midtrans_client_key:s}=Gt().props,[a,c]=I.useState(""),[o,l]=I.useState("all"),p=I.useRef(null),[y,u]=I.useState("Siap mendengarkan..."),w=I.useMemo(()=>new pe(e,{keys:["name","description"],threshold:.4,includeScore:!0}),[e]),j=I.useMemo(()=>new pe(t,{keys:["name","phone"],threshold:.4,includeScore:!0}),[t]),[M,N]=I.useState([]),[_,k]=I.useState(null),[q,z]=I.useState(!1),[L,Y]=I.useState("cash"),[S,B]=I.useState(""),[P,D]=I.useState(null),[O,J]=I.useState(!1),{playSuccess:U,playAdd:G,playRemove:X,playError:V,speak:H}=mr(),ee=d=>{u(`Memproses: "${d}"...`);const R=d.toLowerCase().replace(".",","),x=R.match(/^(\d+([.,]\d+)?)/);let F=1,Z=R;x&&(F=parseFloat(x[0].replace(",",".")),Z=R.replace(/^(\d+([.,]\d+)?)\s*(kilo|kg|pcs|potong|set|meter|buah)?\s*/,"").trim());const te=w.search(Z);if(te.length>0){const Q=te[0].item;N(re=>re.find(de=>de.serviceId===Q.id)?re.map(de=>de.serviceId===Q.id?{...de,qty:de.qty+F}:de):[...re,{serviceId:Q.id,name:Q.name,price:parseFloat(Q.price),unit:Q.unit,qty:F}]),G();const ae=`Oke, ${F} ${Q.unit} ${Q.name}`;H(ae),u(ae),oe.success(ae)}else{V();const Q=`Maaf, tidak menemukan layanan "${Z}"`;H(Q),u(Q),oe.error(Q)}},se=d=>{u(`Mencari pelanggan: "${d}"...`);const R=j.search(d);if(R.length>0){const x=R[0].item;k(x),U();const F=`Pelanggan terpilih: ${x.name}`;H(F),u(F),oe.success(F)}else{V();const x=`Maaf, tidak menemukan pelanggan bernama ${d}`;H(x),u(x),oe.error(x)}},ne=[{command:["tambah *","pesan *","masukkan *","input *"],callback:d=>ee(d)},{command:["atas nama *","pelanggan *","customer *","pembeli *"],callback:d=>se(d)},{command:["hapus *","buang *","cancel *"],callback:d=>{const x=new pe(M,{keys:["name"],threshold:.4}).search(d);if(x.length>0){const F=x[0].item;E(F.serviceId);const Z=`Menghapus ${F.name}`;H(Z),u(Z),oe.success(Z)}else H("Barang tidak ada di keranjang")}},{command:["bayar","checkout","selesai","proses","transaksi"],callback:()=>{if(M.length>0&&_)H("Siap, memproses pembayaran"),u("Memproses Pembayaran..."),W();else{V();let d="Gagal. Keranjang kosong atau pelanggan belum dipilih.";H(d),u(d),oe.error(d)}}},{command:["batal","tutup","stop","berhenti","matikan"],callback:()=>{H("Mikrofon dimatikan"),u("Nonaktif")}},{command:"reset",callback:()=>{confirm("Reset keranjang?")&&(N([]),X(),H("Keranjang dikosongkan"))}},{command:"*",callback:d=>{!d||d.length<2||u(`Tidak mengerti: "${d}"`)}}],{transcript:f,listening:i}=pr({commands:ne});I.useEffect(()=>{i&&u(f?`Mendengar: "${f}"`:"Mendengarkan...")},[f,i]);const n=()=>{i||(!window.isSecureContext&&window.location.hostname!=="localhost"&&oe.error("Fitur Suara memerlukan HTTPS atau Localhost!"),oe.info("Mendengarkan...",{description:"Coba: 'Tambah 5 kilo Cuci Komplit'"}))};Pe("ctrl+f",d=>{d.preventDefault(),p.current?.focus()}),Pe("ctrl+m",d=>{d.preventDefault(),n()}),Pe("ctrl+enter",()=>{M.length>0&&_&&W()}),I.useEffect(()=>{if(!s)return;const d=document.createElement("script");return d.src="https://app.sandbox.midtrans.com/snap/snap.js",d.setAttribute("data-client-key",s),d.async=!0,document.body.appendChild(d),()=>{document.body.contains(d)&&document.body.removeChild(d)}},[s]);const m=e.filter(d=>{const R=d.name.toLowerCase().includes(a.toLowerCase()),x=o==="all"?!0:o==="kiloan"?d.unit==="kg"||d.unit==="meter":d.unit==="pcs"||d.unit==="set";return R&&x}),g=d=>{N(R=>R.find(F=>F.serviceId===d.id)?R.map(F=>F.serviceId===d.id?{...F,qty:F.qty+1}:F):[...R,{serviceId:d.id,name:d.name,price:parseFloat(d.price),unit:d.unit,qty:1}]),G(),oe.success(`${d.name} ditambahkan.`)},b=(d,R)=>{N(x=>x.map(F=>{if(F.serviceId===d){let Z=F.unit==="pcs"||F.unit==="set"?1:.5;return{...F,qty:Math.max(Z,F.qty+(R>0?Z:-Z))}}return F})),G()},E=d=>{N(R=>R.filter(x=>x.serviceId!==d)),X()},A=M.reduce((d,R)=>d+R.price*R.qty,0),v=M.filter(d=>d.unit==="kg").reduce((d,R)=>d+R.qty,0),C=I.useMemo(()=>{let d=0;const R=x=>{let F=A;if(x.service_id){const Z=M.filter(te=>te.serviceId===x.service_id);if(Z.length===0)return 0;F=Z.reduce((te,Q)=>te+Q.price*Q.qty,0)}return x.type==="percentage"?F*(parseFloat(x.value)/100):parseFloat(x.value)};return P&&(d+=R(P)),r.filter(x=>!x.code).forEach(x=>{(!x.min_amount||A>=parseFloat(x.min_amount))&&(!x.min_weight||v>=parseFloat(x.min_weight))&&(d+=R(x))}),Math.min(d,A)},[M,P,A,v,r]),$=A-C,W=async()=>{if(!(!_||M.length===0)){J(!0);try{const d={customer_id:_.id,items:M.map(F=>({service_id:F.serviceId,qty:F.qty})),promo_code:P?.code||null,payment_method:L},R=await window.axios.post(route("transactions.store"),d),{snap_token:x}=R.data;L==="midtrans"&&x?window.snap.pay(x,{onSuccess:()=>{U(),ut(),Re.visit(route("transactions.index"))},onPending:()=>Re.visit(route("transactions.index")),onError:()=>V()}):(U(),ut(),oe.success("Berhasil!"),Re.visit(route("transactions.index")))}catch(d){V(),oe.error("Error: "+(d.response?.data?.message||"Gagal"))}finally{J(!1)}}},K=d=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d);return h.jsxs(h.Fragment,{children:[h.jsx(qt,{title:"POS - Kasir Suara"}),h.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-100px)] gap-6",children:[h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"mb-4 flex justify-between items-center pr-2",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Kasir (POS)"}),h.jsxs("p",{className:"text-muted-foreground text-sm flex items-center gap-2",children:[h.jsx(kn,{className:"h-3 w-3"})," Ctrl+F cari, Ctrl+M suara"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ge,{variant:i?"destructive":"outline",size:"icon",onClick:n,children:i?h.jsx(it,{className:"h-4 w-4"}):h.jsx(st,{className:"h-4 w-4"})}),h.jsxs(ge,{variant:"ghost",onClick:()=>window.history.back(),children:[h.jsx(dn,{className:"h-4 w-4 mr-2"})," Kembali"]})]})]}),h.jsxs("div",{className:"flex gap-2 mb-4 pr-2",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(Vt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(en,{ref:p,placeholder:"Cari layanan...",className:"pl-9",value:a,onChange:d=>c(d.target.value)})]}),h.jsx("div",{className:"flex bg-muted rounded-md p-1 gap-1",children:["all","kiloan","satuan"].map(d=>h.jsx("button",{onClick:()=>l(d),className:ln("px-3 text-xs font-medium rounded-sm capitalize",o===d?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:d},d))})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 pb-4",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.jsx(rt,{children:m.map(d=>h.jsx(Ce.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:h.jsx(an,{className:"cursor-pointer hover:border-primary transition-all group",children:h.jsxs("div",{onClick:()=>g(d),children:[h.jsx(nn,{className:"p-4 pb-2",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx(rn,{className:"text-base group-hover:text-primary line-clamp-1",children:d.name}),h.jsxs(hn,{variant:"secondary",className:"text-[10px]",children:["/",d.unit]})]})}),h.jsxs(sn,{className:"p-4 pt-0 mt-2 flex justify-between items-center",children:[h.jsx("span",{className:"font-bold",children:K(parseFloat(d.price))}),h.jsx("div",{className:"h-7 w-7 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx(yt,{className:"h-4 w-4"})})]})]})})},d.id))})}),h.jsx(rt,{children:i&&h.jsx(Ce.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-6 left-0 right-0 z-[100] flex justify-center px-4",children:h.jsxs("div",{className:"bg-zinc-900/95 dark:bg-zinc-100/95 text-white dark:text-black backdrop-blur shadow-2xl rounded-2xl p-4 flex items-center gap-4 max-w-xl w-full border border-white/10",children:[h.jsxs("div",{className:"relative h-10 w-10 flex items-center justify-center bg-red-500 rounded-full",children:[h.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-50"}),h.jsx(st,{className:"h-5 w-5 text-white relative z-10"})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-[10px] font-bold uppercase opacity-50",children:"Sistem Mendengar"}),h.jsx("p",{className:"text-lg font-medium truncate",children:y})]}),h.jsx(ge,{variant:"ghost",size:"icon",onClick:n,className:"rounded-full hover:bg-white/10",children:h.jsx(it,{className:"h-5 w-5"})})]})})}),!window.isSecureContext&&window.location.hostname!=="localhost"&&h.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[100] bg-destructive text-white p-4 rounded-xl shadow-2xl text-center",children:[h.jsx("strong",{children:"Gunakan Localhost atau HTTPS!"}),h.jsx("br",{}),"Browser memblokir mic di alamat IP."]})]})]}),h.jsxs("div",{className:"w-full md:w-[380px] flex flex-col bg-card border rounded-xl shadow-lg h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[h.jsx(tn,{className:"text-xs font-bold text-muted-foreground uppercase mb-2 block",children:"Pelanggan"}),h.jsxs(on,{open:q,onOpenChange:z,children:[h.jsx(cn,{asChild:!0,children:h.jsxs(ge,{variant:"outline",className:"w-full justify-between bg-background",children:[_?_.name:"Pilih Pelanggan...",h.jsx(Sn,{className:"ml-2 h-4 w-4 opacity-50"})]})}),h.jsx(un,{className:"w-[340px] p-0",children:h.jsxs(Ut,{children:[h.jsx(Ht,{placeholder:"Cari..."}),h.jsxs(Yt,{children:[h.jsx(Zt,{children:"Tidak ada."}),h.jsx(Qt,{children:t.map(d=>h.jsx(Jt,{onSelect:()=>{k(d),z(!1)},children:d.name},d.id))})]})]})})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-slate-50/50 dark:bg-slate-900/20",children:M.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground opacity-30",children:[h.jsx(Rn,{className:"h-12 w-12 mb-2"}),h.jsx("p",{children:"Kosong"})]}):M.map(d=>h.jsx(ni,{item:d,updateQty:b,removeItem:E},d.serviceId))}),h.jsxs("div",{className:"p-4 border-t bg-background",children:[h.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"Subtotal"}),h.jsx("span",{children:K(A)})]}),C>0&&h.jsxs("div",{className:"flex justify-between text-emerald-600 font-bold",children:[h.jsx("span",{children:"Diskon"}),h.jsxs("span",{children:["-",K(C)]})]}),h.jsx(fn,{}),h.jsxs("div",{className:"flex justify-between text-xl font-bold pt-1",children:[h.jsx("span",{children:"Total"}),h.jsx("span",{className:"text-primary",children:h.jsx(ti,{value:$})})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[h.jsxs(ge,{variant:L==="cash"?"default":"outline",onClick:()=>Y("cash"),className:"flex-col h-auto py-2 gap-1",children:[h.jsx(xn,{className:"h-4 w-4"}),h.jsx("span",{className:"text-[10px]",children:"Tunai"})]}),h.jsxs(ge,{variant:L==="midtrans"?"default":"outline",onClick:()=>Y("midtrans"),className:"flex-col h-auto py-2 gap-1",children:[h.jsx(wn,{className:"h-4 w-4"}),h.jsx("span",{className:"text-[10px]",children:"QRIS"})]})]}),h.jsx(ge,{className:"w-full h-12 font-bold text-lg",disabled:O||M.length===0||!_,onClick:W,children:O?h.jsx(Cn,{className:"animate-spin"}):"Bayar"})]})]})]})]})}ri.layout=t=>h.jsx(Xt,{children:t});export{ri as default};
