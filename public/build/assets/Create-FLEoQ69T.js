import{r as N,c as je,g as Gt,u as qt,j as h,H as Vt,b as _e}from"./app-Clij37a7.js";import{g as Ut,P as xt,h as Ht,i as Yt,j as Zt,k as Qt,l as Jt,m as Xt,A as en}from"./AdminLayout-DcDEw9F0.js";import{B as ve}from"./button-Du4d_PUj.js";import{I as tn}from"./input-B7nGYMVS.js";import{L as nn}from"./label-BxHtQkO_.js";import{C as rn,a as sn,e as an}from"./card-O53tyQRo.js";import{S as on}from"./spotlight-card-5NOVcLY2.js";import{P as cn,a as un,b as ln}from"./popover-Cc0xyugX.js";import{c as hn}from"./utils-BELw0PCo.js";import{t as ce}from"./index-mAcSEs5T.js";import{B as st}from"./badge-IaJrgpel.js";import{S as dn}from"./separator-6Zpmkh9I.js";import{c as Ee}from"./createLucideIcon-7pP0XTvI.js";import{A as fn}from"./arrow-left-DTasXwpz.js";import{A as at}from"./index-rYS_I75V.js";import{i as pn,u as Ne,a as mn,M as gn,b as yn,f as vn,c as bn,d as Pe,m as Se}from"./proxy-BgYb6SAi.js";import{B as xn}from"./banknote-2Q4_0U8w.js";import{C as wn}from"./credit-card-CofHjQE2.js";import{L as Cn}from"./loader-circle-CDc41NOX.js";import{T as Mn}from"./trash-ZFUkII0b.js";import"./dialog-DmKU8xAV.js";import"./index-BbA6YFUE.js";import"./index-D44yVRzP.js";import"./index-fKL662UW.js";import"./index-DG6IDE4v.js";import"./check-f6-8tjn4.js";import"./avatar-R8uWMimD.js";import"./index-zwkoN8Zf.js";import"./BackgroundParticles-CVKq8XbX.js";import"./shirt-CIX-2J_S.js";const An=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Sn=Ee("chevrons-up-down",An);const En=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],kn=Ee("keyboard",En);const jn=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],ot=Ee("mic-off",jn);const Ln=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],ct=Ee("mic",Ln);const Tn=[["path",{d:"M5 12h14",key:"1ays0h"}]],Nn=Ee("minus",Tn);const Fn=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Rn=Ee("shopping-cart",Fn);function In(...t){const e=!Array.isArray(t[0]),r=e?0:-1,s=t[0+r],a=t[1+r],c=t[2+r],o=t[3+r],d=pn(a,c,o);return e?d(s):d}function wt(t){const e=Ne(()=>mn(t)),{isStatic:r}=N.useContext(gn);if(r){const[,s]=N.useState(t);N.useEffect(()=>e.on("change",s),[])}return e}function Ct(t,e){const r=wt(e()),s=()=>r.set(e());return s(),yn(()=>{const a=()=>vn.preRender(s,!1,!0),c=t.map(o=>o.on("change",a));return()=>{c.forEach(o=>o()),bn(s)}}),r}function Dn(t){Pe.current=[],t();const e=Ct(Pe.current,t);return Pe.current=void 0,e}function Ve(t,e,r,s){if(typeof t=="function")return Dn(t);if(r!==void 0&&!Array.isArray(r)&&typeof e!="function")return Bn(t,e,r,s);const o=typeof e=="function"?e:In(e,r,s);return Array.isArray(t)?ut(t,o):ut([t],([d])=>o(d))}function ut(t,e){const r=Ne(()=>[]);return Ct(t,()=>{r.length=0;const s=t.length;for(let a=0;a<s;a++)r[a]=t[a].get();return e(r)})}function Bn(t,e,r,s){const a=Ne(()=>Object.keys(r)),c=Ne(()=>({}));for(const o of a)c[o]=Ve(t,e,r[o],s);return c}var Oe={exports:{}},lt;function _n(){return lt||(lt=1,(function(t){var e=(function(r){var s=Object.prototype,a=s.hasOwnProperty,c=Object.defineProperty||function(l,i,n){l[i]=n.value},o,d=typeof Symbol=="function"?Symbol:{},m=d.iterator||"@@iterator",y=d.asyncIterator||"@@asyncIterator",u=d.toStringTag||"@@toStringTag";function x(l,i,n){return Object.defineProperty(l,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),l[i]}try{x({},"")}catch{x=function(i,n,p){return i[n]=p}}function k(l,i,n,p){var f=i&&i.prototype instanceof j?i:j,b=Object.create(f.prototype),S=new J(p||[]);return c(b,"_invoke",{value:U(l,n,S)}),b}r.wrap=k;function C(l,i,n){try{return{type:"normal",arg:l.call(i,n)}}catch(p){return{type:"throw",arg:p}}}var F="suspendedStart",q="suspendedYield",w="executing",G="completed",$={};function j(){}function H(){}function A(){}var I={};x(I,m,function(){return this});var P=Object.getPrototypeOf,R=P&&P(P(ae([])));R&&R!==s&&a.call(R,m)&&(I=R);var z=A.prototype=j.prototype=Object.create(I);H.prototype=A,c(z,"constructor",{value:A,configurable:!0}),c(A,"constructor",{value:H,configurable:!0}),H.displayName=x(A,u,"GeneratorFunction");function te(l){["next","throw","return"].forEach(function(i){x(l,i,function(n){return this._invoke(i,n)})})}r.isGeneratorFunction=function(l){var i=typeof l=="function"&&l.constructor;return i?i===H||(i.displayName||i.name)==="GeneratorFunction":!1},r.mark=function(l){return Object.setPrototypeOf?Object.setPrototypeOf(l,A):(l.__proto__=A,x(l,u,"GeneratorFunction")),l.prototype=Object.create(z),l},r.awrap=function(l){return{__await:l}};function V(l,i){function n(b,S,E,v){var M=C(l[b],l,S);if(M.type==="throw")v(M.arg);else{var B=M.arg,O=B.value;return O&&typeof O=="object"&&a.call(O,"__await")?i.resolve(O.__await).then(function(W){n("next",W,E,v)},function(W){n("throw",W,E,v)}):i.resolve(O).then(function(W){B.value=W,E(B)},function(W){return n("throw",W,E,v)})}}var p;function f(b,S){function E(){return new i(function(v,M){n(b,S,v,M)})}return p=p?p.then(E,E):E()}c(this,"_invoke",{value:f})}te(V.prototype),x(V.prototype,y,function(){return this}),r.AsyncIterator=V,r.async=function(l,i,n,p,f){f===void 0&&(f=Promise);var b=new V(k(l,i,n,p),f);return r.isGeneratorFunction(i)?b:b.next().then(function(S){return S.done?S.value:b.next()})};function U(l,i,n){var p=F;return function(b,S){if(p===w)throw new Error("Generator is already running");if(p===G){if(b==="throw")throw S;return re()}for(n.method=b,n.arg=S;;){var E=n.delegate;if(E){var v=X(E,n);if(v){if(v===$)continue;return v}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(p===F)throw p=G,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);p=w;var M=C(l,i,n);if(M.type==="normal"){if(p=n.done?G:q,M.arg===$)continue;return{value:M.arg,done:n.done}}else M.type==="throw"&&(p=G,n.method="throw",n.arg=M.arg)}}}function X(l,i){var n=i.method,p=l.iterator[n];if(p===o)return i.delegate=null,n==="throw"&&l.iterator.return&&(i.method="return",i.arg=o,X(l,i),i.method==="throw")||n!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),$;var f=C(p,l.iterator,i.arg);if(f.type==="throw")return i.method="throw",i.arg=f.arg,i.delegate=null,$;var b=f.arg;if(!b)return i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,$;if(b.done)i[l.resultName]=b.value,i.next=l.nextLoc,i.method!=="return"&&(i.method="next",i.arg=o);else return b;return i.delegate=null,$}te(z),x(z,u,"Generator"),x(z,m,function(){return this}),x(z,"toString",function(){return"[object Generator]"});function Y(l){var i={tryLoc:l[0]};1 in l&&(i.catchLoc=l[1]),2 in l&&(i.finallyLoc=l[2],i.afterLoc=l[3]),this.tryEntries.push(i)}function ee(l){var i=l.completion||{};i.type="normal",delete i.arg,l.completion=i}function J(l){this.tryEntries=[{tryLoc:"root"}],l.forEach(Y,this),this.reset(!0)}r.keys=function(l){var i=Object(l),n=[];for(var p in i)n.push(p);return n.reverse(),function f(){for(;n.length;){var b=n.pop();if(b in i)return f.value=b,f.done=!1,f}return f.done=!0,f}};function ae(l){if(l!=null){var i=l[m];if(i)return i.call(l);if(typeof l.next=="function")return l;if(!isNaN(l.length)){var n=-1,p=function f(){for(;++n<l.length;)if(a.call(l,n))return f.value=l[n],f.done=!1,f;return f.value=o,f.done=!0,f};return p.next=p}}throw new TypeError(typeof l+" is not iterable")}r.values=ae;function re(){return{value:o,done:!0}}return J.prototype={constructor:J,reset:function(l){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ee),!l)for(var i in this)i.charAt(0)==="t"&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=o)},stop:function(){this.done=!0;var l=this.tryEntries[0],i=l.completion;if(i.type==="throw")throw i.arg;return this.rval},dispatchException:function(l){if(this.done)throw l;var i=this;function n(v,M){return b.type="throw",b.arg=l,i.next=v,M&&(i.method="next",i.arg=o),!!M}for(var p=this.tryEntries.length-1;p>=0;--p){var f=this.tryEntries[p],b=f.completion;if(f.tryLoc==="root")return n("end");if(f.tryLoc<=this.prev){var S=a.call(f,"catchLoc"),E=a.call(f,"finallyLoc");if(S&&E){if(this.prev<f.catchLoc)return n(f.catchLoc,!0);if(this.prev<f.finallyLoc)return n(f.finallyLoc)}else if(S){if(this.prev<f.catchLoc)return n(f.catchLoc,!0)}else if(E){if(this.prev<f.finallyLoc)return n(f.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(l,i){for(var n=this.tryEntries.length-1;n>=0;--n){var p=this.tryEntries[n];if(p.tryLoc<=this.prev&&a.call(p,"finallyLoc")&&this.prev<p.finallyLoc){var f=p;break}}f&&(l==="break"||l==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var b=f?f.completion:{};return b.type=l,b.arg=i,f?(this.method="next",this.next=f.finallyLoc,$):this.complete(b)},complete:function(l,i){if(l.type==="throw")throw l.arg;return l.type==="break"||l.type==="continue"?this.next=l.arg:l.type==="return"?(this.rval=this.arg=l.arg,this.method="return",this.next="end"):l.type==="normal"&&i&&(this.next=i),$},finish:function(l){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===l)return this.complete(n.completion,n.afterLoc),ee(n),$}},catch:function(l){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===l){var p=n.completion;if(p.type==="throw"){var f=p.arg;ee(n)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(l,i,n){return this.delegate={iterator:ae(l),resultName:i,nextLoc:n},this.method==="next"&&(this.arg=o),$}},r})(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Oe)),Oe.exports}_n();const Mt=["shift","alt","meta","mod","ctrl","control"],Pn={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function me(t){return(Pn[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function At(t){return Mt.includes(t)}function $e(t,e=","){return t.toLowerCase().split(e)}function Ke(t,e="+",r=">",s=!1,a,c){let o=[],d=!1;t=t.trim(),t.includes(r)?(d=!0,o=t.toLocaleLowerCase().split(r).map(u=>me(u))):o=t.toLocaleLowerCase().split(e).map(u=>me(u));const m={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod"),useKey:s},y=o.filter(u=>!Mt.includes(u));return{...m,keys:y,description:a,isSequence:d,hotkey:t,metadata:c}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&St([me(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&Et([me(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{de.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{de.clear()},0)}));const de=new Set;function Xe(t){return Array.isArray(t)}function On(t,e=","){return(Xe(t)?t:t.split(e)).every(r=>de.has(r.trim().toLowerCase()))}function St(t){const e=Array.isArray(t)?t:[t];de.has("meta")&&de.forEach(r=>{At(r)||de.delete(r.toLowerCase())}),e.forEach(r=>{de.add(r.toLowerCase())})}function Et(t){const e=Array.isArray(t)?t:[t];t==="meta"?de.clear():e.forEach(r=>{de.delete(r.toLowerCase())})}function $n(t,e,r){(typeof r=="function"&&r(t,e)||r===!0)&&t.preventDefault()}function Kn(t,e,r){return typeof r=="function"?r(t,e):r===!0||r===void 0}const zn=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function Wn(t){return kt(t,zn)}function kt(t,e=!1){const{target:r,composed:s}=t;let a,c;return Gn(r)&&s?(a=t.composedPath()[0]&&t.composedPath()[0].tagName,c=t.composedPath()[0]&&t.composedPath()[0].role):(a=r&&r.tagName,c=r&&r.role),Xe(e)?!!(a&&e&&e.some(o=>o.toLowerCase()===a.toLowerCase()||o===c)):!!(a&&e&&e)}function Gn(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function qn(t,e){return t.length===0&&e?!1:e?t.some(r=>e.includes(r))||t.includes("*"):!0}const Vn=(t,e,r=!1)=>{const{alt:s,meta:a,mod:c,shift:o,ctrl:d,keys:m,useKey:y}=e,{code:u,key:x,ctrlKey:k,metaKey:C,shiftKey:F,altKey:q}=t,w=me(u);if(y){if(m?.length===1&&m.includes(x.toLowerCase())){if(!r){if(s!==q||o!==F)return!1;if(c){if(!C&&!k)return!1}else if(a!==C||d!==k)return!1}return!0}return!1}if(!m?.includes(w)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(w))return!1;if(!r){if(s!==q&&w!=="alt"||o!==F&&w!=="shift")return!1;if(c){if(!C&&!k)return!1}else if(a!==C&&w!=="meta"&&w!=="os"||d!==k&&w!=="ctrl"&&w!=="control")return!1}return m&&m.length===1&&m.includes(w)?!0:m&&m.length>0?m.includes(w)?On(m):!1:!m||m.length===0},Un=N.createContext(void 0),Hn=()=>N.useContext(Un);function Yn(t,e){return t===e}const Zn=N.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),Qn=()=>N.useContext(Zn);function Jn(t){const e=N.useRef(void 0);return Yn(e.current,t)||(e.current=t),e.current}const ht=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},Xn=typeof window<"u"?N.useLayoutEffect:N.useEffect;function ze(t,e,r,s){const a=N.useRef(null),c=N.useRef(!1),o=Array.isArray(r)?Array.isArray(s)?void 0:s:r,d=Xe(t)?t.join(o?.delimiter):t,m=N.useCallback(e,[]),y=N.useRef(m);y.current=e;const u=Jn(o),{activeScopes:x}=Qn(),k=Hn();return Xn(()=>{if(u?.enabled===!1||!qn(x,u?.scopes))return;let C=[],F;const q=(j,H=!1)=>{if(!(Wn(j)&&!kt(j,u?.enableOnFormTags))){if(a.current!==null){const A=a.current.getRootNode();if((A instanceof Document||A instanceof ShadowRoot)&&A.activeElement!==a.current&&!a.current.contains(A.activeElement)){ht(j);return}}j.target?.isContentEditable&&!u?.enableOnContentEditable||$e(d,u?.delimiter).forEach(A=>{if(A.includes(u?.splitKey??"+")&&A.includes(u?.sequenceSplitKey??">")){console.warn(`Hotkey ${A} contains both ${u?.splitKey??"+"} and ${u?.sequenceSplitKey??">"} which is not supported.`);return}const I=Ke(A,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata);if(I.isSequence){F=setTimeout(()=>{C=[]},u?.sequenceTimeoutMs??1e3);const P=I.useKey?j.key:me(j.code);if(At(P.toLowerCase()))return;C.push(P);const R=I.keys?.[C.length-1];if(P!==R){C=[],F&&clearTimeout(F);return}C.length===I.keys?.length&&(y.current(j,I),F&&clearTimeout(F),C=[])}else if(Vn(j,I,u?.ignoreModifiers)||I.keys?.includes("*")){if(u?.ignoreEventWhen?.(j)||H&&c.current)return;if($n(j,I,u?.preventDefault),!Kn(j,I,u?.enabled)){ht(j);return}y.current(j,I),H||(c.current=!0)}})}},w=j=>{j.code!==void 0&&(St(me(j.code)),(u?.keydown===void 0&&u?.keyup!==!0||u?.keydown)&&q(j))},G=j=>{j.code!==void 0&&(Et(me(j.code)),c.current=!1,u?.keyup&&q(j,!0))},$=a.current||o?.document||document;return $.addEventListener("keyup",G,o?.eventListenerOptions),$.addEventListener("keydown",w,o?.eventListenerOptions),k&&$e(d,u?.delimiter).forEach(j=>{k.addHotkey(Ke(j,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata))}),()=>{$.removeEventListener("keyup",G,o?.eventListenerOptions),$.removeEventListener("keydown",w,o?.eventListenerOptions),k&&$e(d,u?.delimiter).forEach(j=>{k.removeHotkey(Ke(j,u?.splitKey,u?.sequenceSplitKey,u?.useKey,u?.description,u?.metadata))}),C=[],F&&clearTimeout(F)}},[d,u,x]),a}var et={};(function t(e,r,s,a){var c=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",d=(function(){if(!e.OffscreenCanvas)return!1;try{var i=new OffscreenCanvas(1,1),n=i.getContext("2d");n.fillRect(0,0,1,1);var p=i.transferToImageBitmap();n.createPattern(p,"no-repeat")}catch{return!1}return!0})();function m(){}function y(i){var n=r.exports.Promise,p=n!==void 0?n:e.Promise;return typeof p=="function"?new p(i):(i(m,m),null)}var u=(function(i,n){return{transform:function(p){if(i)return p;if(n.has(p))return n.get(p);var f=new OffscreenCanvas(p.width,p.height),b=f.getContext("2d");return b.drawImage(p,0,0),n.set(p,f),f},clear:function(){n.clear()}}})(d,new Map),x=(function(){var i=Math.floor(16.666666666666668),n,p,f={},b=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(S){var E=Math.random();return f[E]=requestAnimationFrame(function v(M){b===M||b+i-1<M?(b=M,delete f[E],S()):f[E]=requestAnimationFrame(v)}),E},p=function(S){f[S]&&cancelAnimationFrame(f[S])}):(n=function(S){return setTimeout(S,i)},p=function(S){return clearTimeout(S)}),{frame:n,cancel:p}})(),k=(function(){var i,n,p={};function f(b){function S(E,v){b.postMessage({options:E||{},callback:v})}b.init=function(v){var M=v.transferControlToOffscreen();b.postMessage({canvas:M},[M])},b.fire=function(v,M,B){if(n)return S(v,null),n;var O=Math.random().toString(36).slice(2);return n=y(function(W){function Z(ne){ne.data.callback===O&&(delete p[O],b.removeEventListener("message",Z),n=null,u.clear(),B(),W())}b.addEventListener("message",Z),S(v,O),p[O]=Z.bind(null,{data:{callback:O}})}),n},b.reset=function(){b.postMessage({reset:!0});for(var v in p)p[v](),delete p[v]}}return function(){if(i)return i;if(!s&&c){var b=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([b])))}catch(S){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",S),null}f(i)}return i}})(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function F(i,n){return n?n(i):i}function q(i){return i!=null}function w(i,n,p){return F(i&&q(i[n])?i[n]:C[n],p)}function G(i){return i<0?0:Math.floor(i)}function $(i,n){return Math.floor(Math.random()*(n-i))+i}function j(i){return parseInt(i,16)}function H(i){return i.map(A)}function A(i){var n=String(i).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:j(n.substring(0,2)),g:j(n.substring(2,4)),b:j(n.substring(4,6))}}function I(i){var n=w(i,"origin",Object);return n.x=w(n,"x",Number),n.y=w(n,"y",Number),n}function P(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function R(i){var n=i.getBoundingClientRect();i.width=n.width,i.height=n.height}function z(i){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=i,n}function te(i,n,p,f,b,S,E,v,M){i.save(),i.translate(n,p),i.rotate(S),i.scale(f,b),i.arc(0,0,1,E,v,M),i.restore()}function V(i){var n=i.angle*(Math.PI/180),p=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-n+(.5*p-Math.random()*p),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar,flat:i.flat}}function U(i,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var p=n.tick++/n.totalTicks,f=n.x+n.random*n.tiltCos,b=n.y+n.random*n.tiltSin,S=n.wobbleX+n.random*n.tiltCos,E=n.wobbleY+n.random*n.tiltSin;if(i.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-p)+")",i.beginPath(),o&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))i.fill(ae(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(S-f)*.1,Math.abs(E-b)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var v=Math.PI/10*n.wobble,M=Math.abs(S-f)*.1,B=Math.abs(E-b)*.1,O=n.shape.bitmap.width*n.scalar,W=n.shape.bitmap.height*n.scalar,Z=new DOMMatrix([Math.cos(v)*M,Math.sin(v)*M,-Math.sin(v)*B,Math.cos(v)*B,n.x,n.y]);Z.multiplySelf(new DOMMatrix(n.shape.matrix));var ne=i.createPattern(u.transform(n.shape.bitmap),"no-repeat");ne.setTransform(Z),i.globalAlpha=1-p,i.fillStyle=ne,i.fillRect(n.x-O/2,n.y-W/2,O,W),i.globalAlpha=1}else if(n.shape==="circle")i.ellipse?i.ellipse(n.x,n.y,Math.abs(S-f)*n.ovalScalar,Math.abs(E-b)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):te(i,n.x,n.y,Math.abs(S-f)*n.ovalScalar,Math.abs(E-b)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var K=Math.PI/2*3,ie=4*n.scalar,g=8*n.scalar,D=n.x,T=n.y,_=5,Q=Math.PI/_;_--;)D=n.x+Math.cos(K)*g,T=n.y+Math.sin(K)*g,i.lineTo(D,T),K+=Q,D=n.x+Math.cos(K)*ie,T=n.y+Math.sin(K)*ie,i.lineTo(D,T),K+=Q;else i.moveTo(Math.floor(n.x),Math.floor(n.y)),i.lineTo(Math.floor(n.wobbleX),Math.floor(b)),i.lineTo(Math.floor(S),Math.floor(E)),i.lineTo(Math.floor(f),Math.floor(n.wobbleY));return i.closePath(),i.fill(),n.tick<n.totalTicks}function X(i,n,p,f,b){var S=n.slice(),E=i.getContext("2d"),v,M,B=y(function(O){function W(){v=M=null,E.clearRect(0,0,f.width,f.height),u.clear(),b(),O()}function Z(){s&&!(f.width===a.width&&f.height===a.height)&&(f.width=i.width=a.width,f.height=i.height=a.height),!f.width&&!f.height&&(p(i),f.width=i.width,f.height=i.height),E.clearRect(0,0,f.width,f.height),S=S.filter(function(ne){return U(E,ne)}),S.length?v=x.frame(Z):W()}v=x.frame(Z),M=W});return{addFettis:function(O){return S=S.concat(O),B},canvas:i,promise:B,reset:function(){v&&x.cancel(v),M&&M()}}}function Y(i,n){var p=!i,f=!!w(n||{},"resize"),b=!1,S=w(n,"disableForReducedMotion",Boolean),E=c&&!!w(n||{},"useWorker"),v=E?k():null,M=p?P:R,B=i&&v?!!i.__confetti_initialized:!1,O=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,W;function Z(K,ie,g){for(var D=w(K,"particleCount",G),T=w(K,"angle",Number),_=w(K,"spread",Number),Q=w(K,"startVelocity",Number),pe=w(K,"decay",Number),se=w(K,"gravity",Number),ke=w(K,"drift",Number),Ce=w(K,"colors",H),nt=w(K,"ticks",Number),le=w(K,"shapes"),$t=w(K,"scalar"),Kt=!!w(K,"flat"),rt=I(K),it=D,Be=[],zt=i.width*rt.x,Wt=i.height*rt.y;it--;)Be.push(V({x:zt,y:Wt,angle:T,spread:_,startVelocity:Q,color:Ce[it%Ce.length],shape:le[$(0,le.length)],ticks:nt,decay:pe,gravity:se,drift:ke,scalar:$t,flat:Kt}));return W?W.addFettis(Be):(W=X(i,Be,M,ie,g),W.promise)}function ne(K){var ie=S||w(K,"disableForReducedMotion",Boolean),g=w(K,"zIndex",Number);if(ie&&O)return y(function(Q){Q()});p&&W?i=W.canvas:p&&!i&&(i=z(g),document.body.appendChild(i)),f&&!B&&M(i);var D={width:i.width,height:i.height};v&&!B&&v.init(i),B=!0,v&&(i.__confetti_initialized=!0);function T(){if(v){var Q={getBoundingClientRect:function(){if(!p)return i.getBoundingClientRect()}};M(Q),v.postMessage({resize:{width:Q.width,height:Q.height}});return}D.width=D.height=null}function _(){W=null,f&&(b=!1,e.removeEventListener("resize",T)),p&&i&&(document.body.contains(i)&&document.body.removeChild(i),i=null,B=!1)}return f&&!b&&(b=!0,e.addEventListener("resize",T,!1)),v?v.fire(K,D,_):Z(K,D,_)}return ne.reset=function(){v&&v.reset(),W&&W.reset()},ne}var ee;function J(){return ee||(ee=Y(null,{useWorker:!0,resize:!0})),ee}function ae(i,n,p,f,b,S,E){var v=new Path2D(i),M=new Path2D;M.addPath(v,new DOMMatrix(n));var B=new Path2D;return B.addPath(M,new DOMMatrix([Math.cos(E)*b,Math.sin(E)*b,-Math.sin(E)*S,Math.cos(E)*S,p,f])),B}function re(i){if(!o)throw new Error("path confetti are not supported in this browser");var n,p;typeof i=="string"?n=i:(n=i.path,p=i.matrix);var f=new Path2D(n),b=document.createElement("canvas"),S=b.getContext("2d");if(!p){for(var E=1e3,v=E,M=E,B=0,O=0,W,Z,ne=0;ne<E;ne+=2)for(var K=0;K<E;K+=2)S.isPointInPath(f,ne,K,"nonzero")&&(v=Math.min(v,ne),M=Math.min(M,K),B=Math.max(B,ne),O=Math.max(O,K));W=B-v,Z=O-M;var ie=10,g=Math.min(ie/W,ie/Z);p=[g,0,0,g,-Math.round(W/2+v)*g,-Math.round(Z/2+M)*g]}return{type:"path",path:n,matrix:p}}function l(i){var n,p=1,f="#000000",b='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof i=="string"?n=i:(n=i.text,p="scalar"in i?i.scalar:p,b="fontFamily"in i?i.fontFamily:b,f="color"in i?i.color:f);var S=10*p,E=""+S+"px "+b,v=new OffscreenCanvas(S,S),M=v.getContext("2d");M.font=E;var B=M.measureText(n),O=Math.ceil(B.actualBoundingBoxRight+B.actualBoundingBoxLeft),W=Math.ceil(B.actualBoundingBoxAscent+B.actualBoundingBoxDescent),Z=2,ne=B.actualBoundingBoxLeft+Z,K=B.actualBoundingBoxAscent+Z;O+=Z+Z,W+=Z+Z,v=new OffscreenCanvas(O,W),M=v.getContext("2d"),M.font=E,M.fillStyle=f,M.fillText(n,ne,K);var ie=1/p;return{type:"bitmap",bitmap:v.transferToImageBitmap(),matrix:[ie,0,0,ie,-O*ie/2,-W*ie/2]}}r.exports=function(){return J().apply(this,arguments)},r.exports.reset=function(){J().reset()},r.exports.create=Y,r.exports.shapeFromPath=re,r.exports.shapeFromText=l})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),et,!1);const dt=et.exports;et.exports.create;function ft(t,e,r,s,a,c,o){try{var d=t[c](o),m=d.value}catch(y){r(y);return}d.done?e(m):Promise.resolve(m).then(s,a)}function xe(t){return function(){var e=this,r=arguments;return new Promise(function(s,a){var c=t.apply(e,r);function o(m){ft(c,s,a,o,d,"next",m)}function d(m){ft(c,s,a,o,d,"throw",m)}o(void 0)})}}var We,pt;function er(){if(pt)return We;pt=1;var t="Expected a function",e=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,d=parseInt,m=typeof je=="object"&&je&&je.Object===Object&&je,y=typeof self=="object"&&self&&self.Object===Object&&self,u=m||y||Function("return this")(),x=Object.prototype,k=x.toString,C=Math.max,F=Math.min,q=function(){return u.Date.now()};function w(A,I,P){var R,z,te,V,U,X,Y=0,ee=!1,J=!1,ae=!0;if(typeof A!="function")throw new TypeError(t);I=H(I)||0,G(P)&&(ee=!!P.leading,J="maxWait"in P,te=J?C(H(P.maxWait)||0,I):te,ae="trailing"in P?!!P.trailing:ae);function re(v){var M=R,B=z;return R=z=void 0,Y=v,V=A.apply(B,M),V}function l(v){return Y=v,U=setTimeout(p,I),ee?re(v):V}function i(v){var M=v-X,B=v-Y,O=I-M;return J?F(O,te-B):O}function n(v){var M=v-X,B=v-Y;return X===void 0||M>=I||M<0||J&&B>=te}function p(){var v=q();if(n(v))return f(v);U=setTimeout(p,i(v))}function f(v){return U=void 0,ae&&R?re(v):(R=z=void 0,V)}function b(){U!==void 0&&clearTimeout(U),Y=0,R=X=z=U=void 0}function S(){return U===void 0?V:f(q())}function E(){var v=q(),M=n(v);if(R=arguments,z=this,X=v,M){if(U===void 0)return l(X);if(J)return U=setTimeout(p,I),re(X)}return U===void 0&&(U=setTimeout(p,I)),V}return E.cancel=b,E.flush=S,E}function G(A){var I=typeof A;return!!A&&(I=="object"||I=="function")}function $(A){return!!A&&typeof A=="object"}function j(A){return typeof A=="symbol"||$(A)&&k.call(A)==r}function H(A){if(typeof A=="number")return A;if(j(A))return e;if(G(A)){var I=typeof A.valueOf=="function"?A.valueOf():A;A=G(I)?I+"":I}if(typeof A!="string")return A===0?A:+A;A=A.replace(s,"");var P=c.test(A);return P||o.test(A)?d(A.slice(2),P?2:8):a.test(A)?e:+A}return We=w,We}var tr=er();const nr=Gt(tr),Me=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),rr=t=>t===Me;var Fe=(()=>/(android)/i.test(typeof navigator<"u"?navigator.userAgent:""));const Re=(...t)=>t.map(e=>e.trim()).join(" ").trim(),ir=/\s*\((.*?)\)\s*/g,sr=/(\(\?:[^)]+\))\?/g,ar=/(\(\?)?:\w+/g,or=/\*/g,cr=/[-{}[\]+?.,\\^$|#]/g,ur=t=>t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(cr,"\\$&").replace(ir,"(?:$1)?").replace(ar,(e,r)=>r?e:"([^\\s]+)").replace(or,"(.*?)").replace(sr,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")),lr=(t,e)=>{if(t=t.replace(/\s+/g,"").toLowerCase(),e=e.replace(/\s+/g,"").toLowerCase(),!t.length&&!e.length)return 1;if(!t.length||!e.length)return 0;if(t===e)return 1;if(t.length===1&&e.length===1||t.length<2||e.length<2)return 0;const r=new Map;for(let a=0;a<t.length-1;a++){const c=t.substring(a,a+2),o=r.has(c)?r.get(c)+1:1;r.set(c,o)}let s=0;for(let a=0;a<e.length-1;a++){const c=e.substring(a,a+2),o=r.has(c)?r.get(c):0;o>0&&(r.set(c,o-1),s++)}return 2*s/(t.length+e.length-2)},jt=()=>typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0);class Ge{setSpeechRecognition(e){const r=!!e&&(rr(e)||jt());r&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(r)}subscribe(e,r){this.subscribers[e]=r}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach(r=>{const{onListeningChange:s}=this.subscribers[r];s(e)})}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach(r=>{const{onMicrophoneAvailabilityChange:s}=this.subscribers[r];s(e)})}emitTranscriptChange(e,r){Object.keys(this.subscribers).forEach(s=>{const{onTranscriptChange:a}=this.subscribers[s];a(e,r)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(e=>{const{onClearTranscript:r}=this.subscribers[e];r()})}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach(r=>{const{onBrowserSupportsSpeechRecognitionChange:s,onBrowserSupportsContinuousListeningChange:a}=this.subscribers[r];s(e),a(e)})}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&e.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results:e,resultIndex:r}){const s=r===void 0?e.length-1:r;this.interimTranscript="",this.finalTranscript="";for(let c=s;c<e.length;++c)e[c].isFinal&&(!Fe()||e[c][0].confidence>0)?this.updateFinalTranscript(e[c][0].transcript):this.interimTranscript=Re(this.interimTranscript,e[c][0].transcript);let a=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(a=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,a||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=Re(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return xe(function*({continuous:e=!1,language:r}={}){if(!this.recognition)return;const s=e!==this.recognition.continuous,a=r&&r!==this.recognition.lang;if((s||a)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=s?e:this.recognition.continuous,this.recognition.lang=a?r:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(c){c instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return xe(function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}stopListening(){return xe(function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}getRecognition(){return this.recognition}start(){return xe(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),Fe()&&(this.updateFinalTranscript=nr(this.updateFinalTranscript,250,{leading:!0}))}}const Lt="CLEAR_TRANSCRIPT",Tt="APPEND_TRANSCRIPT",hr=()=>({type:Lt}),dr=(t,e)=>({type:Tt,payload:{interimTranscript:t,finalTranscript:e}}),fr=(t,e)=>{switch(e.type){case Lt:return{interimTranscript:"",finalTranscript:""};case Tt:return{interimTranscript:e.payload.interimTranscript,finalTranscript:Re(t.finalTranscript,e.payload.finalTranscript)};default:throw new Error}};let Ae=!!Me,Te=Ae&&!Fe(),he;const pr=({transcribing:t=!0,clearTranscriptOnListen:e=!0,commands:r=[]}={})=>{const[s]=N.useState(we.getRecognitionManager()),[a,c]=N.useState(Ae),[o,d]=N.useState(Te),[{interimTranscript:m,finalTranscript:y},u]=N.useReducer(fr,{interimTranscript:s.interimTranscript,finalTranscript:""}),[x,k]=N.useState(s.listening),[C,F]=N.useState(s.isMicrophoneAvailable),q=N.useRef(r);q.current=r;const w=()=>{u(hr())},G=N.useCallback(()=>{s.resetTranscript(),w()},[s]),$=(R,z,te)=>{const U=(typeof R=="object"?R.toString():R).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),X=lr(U,z);return X>=te?{command:R,commandWithoutSpecials:U,howSimilar:X,isFuzzyMatch:!0}:null},j=(R,z)=>{const V=ur(R).exec(z);return V?{command:R,parameters:V.slice(1)}:null},H=N.useCallback((R,z)=>{q.current.forEach(({command:te,callback:V,matchInterim:U=!1,isFuzzyMatch:X=!1,fuzzyMatchingThreshold:Y=.8,bestMatchOnly:ee=!1})=>{const J=!z&&U?R.trim():z.trim(),re=(Array.isArray(te)?te:[te]).map(l=>X?$(l,J,Y):j(l,J)).filter(l=>l);if(X&&ee&&re.length>=2){re.sort((p,f)=>f.howSimilar-p.howSimilar);const{command:l,commandWithoutSpecials:i,howSimilar:n}=re[0];V(i,J,n,{command:l,resetTranscript:G})}else re.forEach(l=>{if(l.isFuzzyMatch){const{command:i,commandWithoutSpecials:n,howSimilar:p}=l;V(n,J,p,{command:i,resetTranscript:G})}else{const{command:i,parameters:n}=l;V(...n,{command:i,resetTranscript:G})}})})},[G]),A=N.useCallback((R,z)=>{t&&u(dr(R,z)),H(R,z)},[H,t]),I=N.useCallback(()=>{e&&w()},[e]);return N.useEffect(()=>{const R=we.counter;we.counter+=1;const z={onListeningChange:k,onMicrophoneAvailabilityChange:F,onTranscriptChange:A,onClearTranscript:I,onBrowserSupportsSpeechRecognitionChange:c,onBrowserSupportsContinuousListeningChange:d};return s.subscribe(R,z),()=>{s.unsubscribe(R)}},[t,e,s,A,I]),{transcript:Re(y,m),interimTranscript:m,finalTranscript:y,listening:x,isMicrophoneAvailable:C,resetTranscript:G,browserSupportsSpeechRecognition:a,browserSupportsContinuousListening:o}},we={counter:0,applyPolyfill:t=>{he?he.setSpeechRecognition(t):he=new Ge(t);const e=!!t&&jt();Ae=e,Te=e},removePolyfill:()=>{he?he.setSpeechRecognition(Me):he=new Ge(Me),Ae=!!Me,Te=Ae&&!Fe()},getRecognitionManager:()=>(he||(he=new Ge(Me)),he),getRecognition:()=>we.getRecognitionManager().getRecognition(),startListening:({continuous:t,language:e}={})=>xe(function*(){yield we.getRecognitionManager().startListening({continuous:t,language:e})})(),stopListening:()=>xe(function*(){yield we.getRecognitionManager().stopListening()})(),abortListening:()=>xe(function*(){yield we.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>Ae,browserSupportsContinuousListening:()=>Te};function mr(){const t=N.useCallback((o,d,m)=>{const y=new(window.AudioContext||window.webkitAudioContext),u=y.createOscillator(),x=y.createGain();u.type=d,u.frequency.setValueAtTime(o,y.currentTime),x.gain.setValueAtTime(.1,y.currentTime),x.gain.exponentialRampToValueAtTime(1e-5,y.currentTime+m),u.connect(x),x.connect(y.destination),u.start(),u.stop(y.currentTime+m)},[]);return{playSuccess:()=>{t(1200,"sine",.1),setTimeout(()=>t(1600,"sine",.2),100)},playAdd:()=>{t(600,"triangle",.1)},playRemove:()=>{t(150,"sawtooth",.15)},playError:()=>{t(150,"square",.1),setTimeout(()=>t(100,"square",.2),100)},speak:o=>{if("speechSynthesis"in window){const d=new SpeechSynthesisUtterance(o);d.lang="id-ID",d.rate=1.1,window.speechSynthesis.speak(d)}}}}function fe(t){return Array.isArray?Array.isArray(t):Rt(t)==="[object Array]"}function gr(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function yr(t){return t==null?"":gr(t)}function ue(t){return typeof t=="string"}function Nt(t){return typeof t=="number"}function vr(t){return t===!0||t===!1||br(t)&&Rt(t)=="[object Boolean]"}function Ft(t){return typeof t=="object"}function br(t){return Ft(t)&&t!==null}function oe(t){return t!=null}function qe(t){return!t.trim().length}function Rt(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xr="Incorrect 'index' type",wr=t=>`Invalid value for key ${t}`,Cr=t=>`Pattern length exceeds max of ${t}.`,Mr=t=>`Missing ${t} property in key`,Ar=t=>`Property 'weight' in key '${t}' must be a positive integer`,mt=Object.prototype.hasOwnProperty;class Sr{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(s=>{let a=It(s);this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(s=>{s.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function It(t){let e=null,r=null,s=null,a=1,c=null;if(ue(t)||fe(t))s=t,e=gt(t),r=Ue(t);else{if(!mt.call(t,"name"))throw new Error(Mr("name"));const o=t.name;if(s=o,mt.call(t,"weight")&&(a=t.weight,a<=0))throw new Error(Ar(o));e=gt(o),r=Ue(o),c=t.getFn}return{path:e,id:r,weight:a,src:s,getFn:c}}function gt(t){return fe(t)?t:t.split(".")}function Ue(t){return fe(t)?t.join("."):t}function Er(t,e){let r=[],s=!1;const a=(c,o,d)=>{if(oe(c))if(!o[d])r.push(c);else{let m=o[d];const y=c[m];if(!oe(y))return;if(d===o.length-1&&(ue(y)||Nt(y)||vr(y)))r.push(yr(y));else if(fe(y)){s=!0;for(let u=0,x=y.length;u<x;u+=1)a(y[u],o,d+1)}else o.length&&a(y,o,d+1)}};return a(t,ue(e)?e.split("."):e,0),s?r:r[0]}const kr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},jr={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Lr={location:0,threshold:.6,distance:100},Tr={useExtendedSearch:!1,getFn:Er,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var L={...jr,...kr,...Lr,...Tr};const Nr=/[^ ]+/g;function Fr(t=1,e=3){const r=new Map,s=Math.pow(10,e);return{get(a){const c=a.match(Nr).length;if(r.has(c))return r.get(c);const o=1/Math.pow(c,.5*t),d=parseFloat(Math.round(o*s)/s);return r.set(c,d),d},clear(){r.clear()}}}class tt{constructor({getFn:e=L.getFn,fieldNormWeight:r=L.fieldNormWeight}={}){this.norm=Fr(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ue(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();ue(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!oe(e)||qe(e))return;let s={v:e,i:r,n:this.norm.get(e)};this.records.push(s)}_addObject(e,r){let s={i:r,$:{}};this.keys.forEach((a,c)=>{let o=a.getFn?a.getFn(e):this.getFn(e,a.path);if(oe(o)){if(fe(o)){let d=[];const m=[{nestedArrIndex:-1,value:o}];for(;m.length;){const{nestedArrIndex:y,value:u}=m.pop();if(oe(u))if(ue(u)&&!qe(u)){let x={v:u,i:y,n:this.norm.get(u)};d.push(x)}else fe(u)&&u.forEach((x,k)=>{m.push({nestedArrIndex:k,value:x})})}s.$[c]=d}else if(ue(o)&&!qe(o)){let d={v:o,n:this.norm.get(o)};s.$[c]=d}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Dt(t,e,{getFn:r=L.getFn,fieldNormWeight:s=L.fieldNormWeight}={}){const a=new tt({getFn:r,fieldNormWeight:s});return a.setKeys(t.map(It)),a.setSources(e),a.create(),a}function Rr(t,{getFn:e=L.getFn,fieldNormWeight:r=L.fieldNormWeight}={}){const{keys:s,records:a}=t,c=new tt({getFn:e,fieldNormWeight:r});return c.setKeys(s),c.setIndexRecords(a),c}function Le(t,{errors:e=0,currentLocation:r=0,expectedLocation:s=0,distance:a=L.distance,ignoreLocation:c=L.ignoreLocation}={}){const o=e/t.length;if(c)return o;const d=Math.abs(s-r);return a?o+d/a:d?1:o}function Ir(t=[],e=L.minMatchCharLength){let r=[],s=-1,a=-1,c=0;for(let o=t.length;c<o;c+=1){let d=t[c];d&&s===-1?s=c:!d&&s!==-1&&(a=c-1,a-s+1>=e&&r.push([s,a]),s=-1)}return t[c-1]&&c-s>=e&&r.push([s,c-1]),r}const be=32;function Dr(t,e,r,{location:s=L.location,distance:a=L.distance,threshold:c=L.threshold,findAllMatches:o=L.findAllMatches,minMatchCharLength:d=L.minMatchCharLength,includeMatches:m=L.includeMatches,ignoreLocation:y=L.ignoreLocation}={}){if(e.length>be)throw new Error(Cr(be));const u=e.length,x=t.length,k=Math.max(0,Math.min(s,x));let C=c,F=k;const q=d>1||m,w=q?Array(x):[];let G;for(;(G=t.indexOf(e,F))>-1;){let P=Le(e,{currentLocation:G,expectedLocation:k,distance:a,ignoreLocation:y});if(C=Math.min(P,C),F=G+u,q){let R=0;for(;R<u;)w[G+R]=1,R+=1}}F=-1;let $=[],j=1,H=u+x;const A=1<<u-1;for(let P=0;P<u;P+=1){let R=0,z=H;for(;R<z;)Le(e,{errors:P,currentLocation:k+z,expectedLocation:k,distance:a,ignoreLocation:y})<=C?R=z:H=z,z=Math.floor((H-R)/2+R);H=z;let te=Math.max(1,k-z+1),V=o?x:Math.min(k+z,x)+u,U=Array(V+2);U[V+1]=(1<<P)-1;for(let Y=V;Y>=te;Y-=1){let ee=Y-1,J=r[t.charAt(ee)];if(q&&(w[ee]=+!!J),U[Y]=(U[Y+1]<<1|1)&J,P&&(U[Y]|=($[Y+1]|$[Y])<<1|1|$[Y+1]),U[Y]&A&&(j=Le(e,{errors:P,currentLocation:ee,expectedLocation:k,distance:a,ignoreLocation:y}),j<=C)){if(C=j,F=ee,F<=k)break;te=Math.max(1,2*k-F)}}if(Le(e,{errors:P+1,currentLocation:k,expectedLocation:k,distance:a,ignoreLocation:y})>C)break;$=U}const I={isMatch:F>=0,score:Math.max(.001,j)};if(q){const P=Ir(w,d);P.length?m&&(I.indices=P):I.isMatch=!1}return I}function Br(t){let e={};for(let r=0,s=t.length;r<s;r+=1){const a=t.charAt(r);e[a]=(e[a]||0)|1<<s-r-1}return e}const Ie=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class Bt{constructor(e,{location:r=L.location,threshold:s=L.threshold,distance:a=L.distance,includeMatches:c=L.includeMatches,findAllMatches:o=L.findAllMatches,minMatchCharLength:d=L.minMatchCharLength,isCaseSensitive:m=L.isCaseSensitive,ignoreDiacritics:y=L.ignoreDiacritics,ignoreLocation:u=L.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:a,includeMatches:c,findAllMatches:o,minMatchCharLength:d,isCaseSensitive:m,ignoreDiacritics:y,ignoreLocation:u},e=m?e:e.toLowerCase(),e=y?Ie(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const x=(C,F)=>{this.chunks.push({pattern:C,alphabet:Br(C),startIndex:F})},k=this.pattern.length;if(k>be){let C=0;const F=k%be,q=k-F;for(;C<q;)x(this.pattern.substr(C,be),C),C+=be;if(F){const w=k-be;x(this.pattern.substr(w),w)}}else x(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a}=this.options;if(e=r?e:e.toLowerCase(),e=s?Ie(e):e,this.pattern===e){let q={isMatch:!0,score:0};return a&&(q.indices=[[0,e.length-1]]),q}const{location:c,distance:o,threshold:d,findAllMatches:m,minMatchCharLength:y,ignoreLocation:u}=this.options;let x=[],k=0,C=!1;this.chunks.forEach(({pattern:q,alphabet:w,startIndex:G})=>{const{isMatch:$,score:j,indices:H}=Dr(e,q,w,{location:c+G,distance:o,threshold:d,findAllMatches:m,minMatchCharLength:y,includeMatches:a,ignoreLocation:u});$&&(C=!0),k+=j,$&&H&&(x=[...x,...H])});let F={isMatch:C,score:C?k/this.chunks.length:1};return C&&a&&(F.indices=x),F}}class ye{constructor(e){this.pattern=e}static isMultiMatch(e){return yt(e,this.multiRegex)}static isSingleMatch(e){return yt(e,this.singleRegex)}search(){}}function yt(t,e){const r=t.match(e);return r?r[1]:null}class _r extends ye{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Pr extends ye{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Or extends ye{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class $r extends ye{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Kr extends ye{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class zr extends ye{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class _t extends ye{constructor(e,{location:r=L.location,threshold:s=L.threshold,distance:a=L.distance,includeMatches:c=L.includeMatches,findAllMatches:o=L.findAllMatches,minMatchCharLength:d=L.minMatchCharLength,isCaseSensitive:m=L.isCaseSensitive,ignoreDiacritics:y=L.ignoreDiacritics,ignoreLocation:u=L.ignoreLocation}={}){super(e),this._bitapSearch=new Bt(e,{location:r,threshold:s,distance:a,includeMatches:c,findAllMatches:o,minMatchCharLength:d,isCaseSensitive:m,ignoreDiacritics:y,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Pt extends ye{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,s;const a=[],c=this.pattern.length;for(;(s=e.indexOf(this.pattern,r))>-1;)r=s+c,a.push([s,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const He=[_r,Pt,Or,$r,zr,Kr,Pr,_t],vt=He.length,Wr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Gr="|";function qr(t,e={}){return t.split(Gr).map(r=>{let s=r.trim().split(Wr).filter(c=>c&&!!c.trim()),a=[];for(let c=0,o=s.length;c<o;c+=1){const d=s[c];let m=!1,y=-1;for(;!m&&++y<vt;){const u=He[y];let x=u.isMultiMatch(d);x&&(a.push(new u(x,e)),m=!0)}if(!m)for(y=-1;++y<vt;){const u=He[y];let x=u.isSingleMatch(d);if(x){a.push(new u(x,e));break}}}return a})}const Vr=new Set([_t.type,Pt.type]);class Ur{constructor(e,{isCaseSensitive:r=L.isCaseSensitive,ignoreDiacritics:s=L.ignoreDiacritics,includeMatches:a=L.includeMatches,minMatchCharLength:c=L.minMatchCharLength,ignoreLocation:o=L.ignoreLocation,findAllMatches:d=L.findAllMatches,location:m=L.location,threshold:y=L.threshold,distance:u=L.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a,minMatchCharLength:c,findAllMatches:d,ignoreLocation:o,location:m,threshold:y,distance:u},e=r?e:e.toLowerCase(),e=s?Ie(e):e,this.pattern=e,this.query=qr(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:a,ignoreDiacritics:c}=this.options;e=a?e:e.toLowerCase(),e=c?Ie(e):e;let o=0,d=[],m=0;for(let y=0,u=r.length;y<u;y+=1){const x=r[y];d.length=0,o=0;for(let k=0,C=x.length;k<C;k+=1){const F=x[k],{isMatch:q,indices:w,score:G}=F.search(e);if(q){if(o+=1,m+=G,s){const $=F.constructor.type;Vr.has($)?d=[...d,...w]:d.push(w)}}else{m=0,o=0,d.length=0;break}}if(o){let k={isMatch:!0,score:m/o};return s&&(k.indices=d),k}}return{isMatch:!1,score:1}}}const Ye=[];function Hr(...t){Ye.push(...t)}function Ze(t,e){for(let r=0,s=Ye.length;r<s;r+=1){let a=Ye[r];if(a.condition(t,e))return new a(t,e)}return new Bt(t,e)}const De={AND:"$and",OR:"$or"},Qe={PATH:"$path",PATTERN:"$val"},Je=t=>!!(t[De.AND]||t[De.OR]),Yr=t=>!!t[Qe.PATH],Zr=t=>!fe(t)&&Ft(t)&&!Je(t),bt=t=>({[De.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Ot(t,e,{auto:r=!0}={}){const s=a=>{let c=Object.keys(a);const o=Yr(a);if(!o&&c.length>1&&!Je(a))return s(bt(a));if(Zr(a)){const m=o?a[Qe.PATH]:c[0],y=o?a[Qe.PATTERN]:a[m];if(!ue(y))throw new Error(wr(m));const u={keyId:Ue(m),pattern:y};return r&&(u.searcher=Ze(y,e)),u}let d={children:[],operator:c[0]};return c.forEach(m=>{const y=a[m];fe(y)&&y.forEach(u=>{d.children.push(s(u))})}),d};return Je(t)||(t=bt(t)),s(t)}function Qr(t,{ignoreFieldNorm:e=L.ignoreFieldNorm}){t.forEach(r=>{let s=1;r.matches.forEach(({key:a,norm:c,score:o})=>{const d=a?a.weight:null;s*=Math.pow(o===0&&d?Number.EPSILON:o,(d||1)*(e?1:c))}),r.score=s})}function Jr(t,e){const r=t.matches;e.matches=[],oe(r)&&r.forEach(s=>{if(!oe(s.indices)||!s.indices.length)return;const{indices:a,value:c}=s;let o={indices:a,value:c};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function Xr(t,e){e.score=t.score}function ei(t,e,{includeMatches:r=L.includeMatches,includeScore:s=L.includeScore}={}){const a=[];return r&&a.push(Jr),s&&a.push(Xr),t.map(c=>{const{idx:o}=c,d={item:e[o],refIndex:o};return a.length&&a.forEach(m=>{m(c,d)}),d})}class ge{constructor(e,r={},s){this.options={...L,...r},this.options.useExtendedSearch,this._keyStore=new Sr(this.options.keys),this.setCollection(e,s)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof tt))throw new Error(xr);this._myIndex=r||Dt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){oe(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let s=0,a=this._docs.length;s<a;s+=1){const c=this._docs[s];e(c,s)&&(this.removeAt(s),s-=1,a-=1,r.push(c))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:s,includeScore:a,shouldSort:c,sortFn:o,ignoreFieldNorm:d}=this.options;let m=ue(e)?ue(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Qr(m,{ignoreFieldNorm:d}),c&&m.sort(o),Nt(r)&&r>-1&&(m=m.slice(0,r)),ei(m,this._docs,{includeMatches:s,includeScore:a})}_searchStringList(e){const r=Ze(e,this.options),{records:s}=this._myIndex,a=[];return s.forEach(({v:c,i:o,n:d})=>{if(!oe(c))return;const{isMatch:m,score:y,indices:u}=r.searchIn(c);m&&a.push({item:c,idx:o,matches:[{score:y,value:c,norm:d,indices:u}]})}),a}_searchLogical(e){const r=Ot(e,this.options),s=(d,m,y)=>{if(!d.children){const{keyId:x,searcher:k}=d,C=this._findMatches({key:this._keyStore.get(x),value:this._myIndex.getValueForItemAtKeyId(m,x),searcher:k});return C&&C.length?[{idx:y,item:m,matches:C}]:[]}const u=[];for(let x=0,k=d.children.length;x<k;x+=1){const C=d.children[x],F=s(C,m,y);if(F.length)u.push(...F);else if(d.operator===De.AND)return[]}return u},a=this._myIndex.records,c={},o=[];return a.forEach(({$:d,i:m})=>{if(oe(d)){let y=s(r,d,m);y.length&&(c[m]||(c[m]={idx:m,item:d,matches:[]},o.push(c[m])),y.forEach(({matches:u})=>{c[m].matches.push(...u)}))}}),o}_searchObjectList(e){const r=Ze(e,this.options),{keys:s,records:a}=this._myIndex,c=[];return a.forEach(({$:o,i:d})=>{if(!oe(o))return;let m=[];s.forEach((y,u)=>{m.push(...this._findMatches({key:y,value:o[u],searcher:r}))}),m.length&&c.push({idx:d,item:o,matches:m})}),c}_findMatches({key:e,value:r,searcher:s}){if(!oe(r))return[];let a=[];if(fe(r))r.forEach(({v:c,i:o,n:d})=>{if(!oe(c))return;const{isMatch:m,score:y,indices:u}=s.searchIn(c);m&&a.push({score:y,key:e,value:c,idx:o,norm:d,indices:u})});else{const{v:c,n:o}=r,{isMatch:d,score:m,indices:y}=s.searchIn(c);d&&a.push({score:m,key:e,value:c,norm:o,indices:y})}return a}}ge.version="7.1.0";ge.createIndex=Dt;ge.parseIndex=Rr;ge.config=L;ge.parseQuery=Ot;Hr(Ur);function ti({value:t}){return h.jsx(Se.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},t)}function ni({item:t,updateQty:e,removeItem:r}){const s=wt(0),a=Ve(s,[-100,0],[0,1]);return h.jsxs(Se.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:100,height:0},style:{x:s,opacity:a},drag:"x",dragConstraints:{left:-100,right:0},onDragEnd:(c,{offset:o})=>{o.x<-80&&r(t.serviceId)},className:"relative touch-none",children:[h.jsxs(Se.div,{style:{opacity:Ve(s,[-50,0],[1,0])},className:"absolute right-0 top-0 bottom-0 flex items-center justify-end pr-4 text-red-500 font-bold text-xs",children:["LEPAS UNTUK HAPUS ",h.jsx(Mn,{className:"ml-1 h-4 w-4"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-background p-3 rounded-lg shadow-sm border border-slate-100 dark:border-slate-800 relative z-10",children:[h.jsxs("div",{className:"flex-1 mr-2",children:[h.jsx("div",{className:"font-medium text-sm line-clamp-1",title:t.name,children:t.name}),h.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.price)," / ",t.unit]})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("div",{className:"flex items-center bg-muted rounded-md h-8 shadow-inner",children:[h.jsx("button",{onClick:()=>e(t.serviceId,-.5),className:"w-8 h-full flex items-center justify-center hover:bg-background rounded-l-md transition-colors text-muted-foreground hover:text-foreground active:scale-90",children:h.jsx(Nn,{className:"h-3 w-3"})}),h.jsx(Se.span,{initial:{scale:1.2},animate:{scale:1},className:"text-sm font-mono w-8 text-center",children:t.qty},t.qty),h.jsx("button",{onClick:()=>e(t.serviceId,.5),className:"w-8 h-full flex items-center justify-center hover:bg-background rounded-r-md transition-colors text-muted-foreground hover:text-foreground active:scale-90",children:h.jsx(xt,{className:"h-3 w-3"})})]})}),h.jsx("div",{className:"text-right min-w-[70px] ml-2",children:h.jsx("div",{className:"font-semibold text-sm",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.price*t.qty)})})]})]})}function ri({customers:t,services:e,promotions:r}){const{midtrans_client_key:s,auth:a}=qt().props,c=a.user,o=c.roles?.includes("pelanggan"),[d,m]=N.useState(""),[y,u]=N.useState("all"),x=N.useRef(null),[k,C]=N.useState("Siap mendengarkan..."),F=N.useMemo(()=>new ge(e,{keys:["name","description"],threshold:.4,includeScore:!0}),[e]),q=N.useMemo(()=>new ge(t,{keys:["name","phone"],threshold:.4,includeScore:!0}),[t]),[w,G]=N.useState([]),$=N.useMemo(()=>o&&t.find(D=>D.user_id===c.id)||null,[o,t,c]),[j,H]=N.useState($);N.useEffect(()=>{$&&H($)},[$]);const[A,I]=N.useState(!1),[P,R]=N.useState("cash"),[z,te]=N.useState(""),[V,U]=N.useState(null),[X,Y]=N.useState(!1),{playSuccess:ee,playAdd:J,playRemove:ae,playError:re,speak:l}=mr(),i=g=>{C(`Memproses: "${g}"...`);const D=g.toLowerCase().replace(".",","),T=D.match(/^(\d+([.,]\d+)?)/);let _=1,Q=D;T&&(_=parseFloat(T[0].replace(",",".")),Q=D.replace(/^(\d+([.,]\d+)?)\s*(kilo|kg|pcs|potong|set|meter|buah)?\s*/,"").trim());const pe=F.search(Q);if(pe.length>0){const se=pe[0].item;G(Ce=>Ce.find(le=>le.serviceId===se.id)?Ce.map(le=>le.serviceId===se.id?{...le,qty:le.qty+_}:le):[...Ce,{serviceId:se.id,name:se.name,price:parseFloat(se.price),unit:se.unit,qty:_}]),J();const ke=`Oke, ${_} ${se.unit} ${se.name}`;l(ke),C(ke),ce.success(ke)}else{re();const se=`Maaf, tidak menemukan layanan "${Q}"`;l(se),C(se),ce.error(se)}},n=g=>{C(`Mencari pelanggan: "${g}"...`);const D=q.search(g);if(D.length>0){const T=D[0].item;H(T),ee();const _=`Pelanggan terpilih: ${T.name}`;l(_),C(_),ce.success(_)}else{re();const T=`Maaf, tidak menemukan pelanggan bernama ${g}`;l(T),C(T),ce.error(T)}},p=[{command:["tambah *","pesan *","masukkan *","input *"],callback:g=>i(g)},{command:["atas nama *","pelanggan *","customer *","pembeli *"],callback:g=>n(g)},{command:["hapus *","buang *","cancel *"],callback:g=>{const T=new ge(w,{keys:["name"],threshold:.4}).search(g);if(T.length>0){const _=T[0].item;B(_.serviceId);const Q=`Menghapus ${_.name}`;l(Q),C(Q),ce.success(Q)}else l("Barang tidak ada di keranjang")}},{command:["bayar","checkout","selesai","proses","transaksi"],callback:()=>{if(w.length>0&&j)l("Siap, memproses pembayaran"),C("Memproses Pembayaran..."),K();else{re();let g="Gagal. Keranjang kosong atau pelanggan belum dipilih.";l(g),C(g),ce.error(g)}}},{command:["batal","tutup","stop","berhenti","matikan"],callback:()=>{l("Mikrofon dimatikan"),C("Nonaktif")}},{command:"reset",callback:()=>{confirm("Reset keranjang?")&&(G([]),ae(),l("Keranjang dikosongkan"))}},{command:"*",callback:g=>{!g||g.length<2||C(`Tidak mengerti: "${g}"`)}}],{transcript:f,listening:b}=pr({commands:p});N.useEffect(()=>{b&&C(f?`Mendengar: "${f}"`:"Mendengarkan...")},[f,b]);const S=()=>{b||(!window.isSecureContext&&window.location.hostname!=="localhost"&&ce.error("Fitur Suara memerlukan HTTPS atau Localhost!"),ce.info("Mendengarkan...",{description:"Coba: 'Tambah 5 kilo Cuci Komplit'"}))};ze("ctrl+f",g=>{g.preventDefault(),x.current?.focus()}),ze("ctrl+m",g=>{g.preventDefault(),S()}),ze("ctrl+enter",()=>{w.length>0&&j&&K()}),N.useEffect(()=>{if(!s)return;const g=document.createElement("script");return g.src="https://app.sandbox.midtrans.com/snap/snap.js",g.setAttribute("data-client-key",s),g.async=!0,document.body.appendChild(g),()=>{document.body.contains(g)&&document.body.removeChild(g)}},[s]);const E=e.filter(g=>{const D=g.name.toLowerCase().includes(d.toLowerCase()),T=y==="all"?!0:y==="kiloan"?g.unit==="kg"||g.unit==="meter":g.unit==="pcs"||g.unit==="set";return D&&T}),v=g=>{G(D=>D.find(_=>_.serviceId===g.id)?D.map(_=>_.serviceId===g.id?{..._,qty:_.qty+1}:_):[...D,{serviceId:g.id,name:g.name,price:parseFloat(g.price),unit:g.unit,qty:1}]),J(),ce.success(`${g.name} ditambahkan.`)},M=(g,D)=>{G(T=>T.map(_=>{if(_.serviceId===g){let Q=_.unit==="pcs"||_.unit==="set"?1:.5;return{..._,qty:Math.max(Q,_.qty+(D>0?Q:-Q))}}return _})),J()},B=g=>{G(D=>D.filter(T=>T.serviceId!==g)),ae()},O=w.reduce((g,D)=>g+D.price*D.qty,0),W=w.filter(g=>g.unit==="kg").reduce((g,D)=>g+D.qty,0),Z=N.useMemo(()=>{let g=0;const D=T=>{let _=O;if(T.service_id){const Q=w.filter(pe=>pe.serviceId===T.service_id);if(Q.length===0)return 0;_=Q.reduce((pe,se)=>pe+se.price*se.qty,0)}return T.type==="percentage"?_*(parseFloat(T.value)/100):parseFloat(T.value)};return V&&(g+=D(V)),r.filter(T=>!T.code).forEach(T=>{(!T.min_amount||O>=parseFloat(T.min_amount))&&(!T.min_weight||W>=parseFloat(T.min_weight))&&(g+=D(T))}),Math.min(g,O)},[w,V,O,W,r]),ne=O-Z,K=async()=>{if(!(!j||w.length===0)){Y(!0);try{const g={customer_id:j.id,items:w.map(_=>({service_id:_.serviceId,qty:_.qty})),promo_code:V?.code||null,payment_method:P},D=await window.axios.post(route("transactions.store"),g),{snap_token:T}=D.data;P==="midtrans"&&T?window.snap.pay(T,{onSuccess:()=>{ee(),dt(),_e.visit(route("transactions.index"))},onPending:()=>_e.visit(route("transactions.index")),onError:()=>re()}):(ee(),dt(),ce.success("Berhasil!"),_e.visit(route("transactions.index")))}catch(g){re(),ce.error("Error: "+(g.response?.data?.message||"Gagal"))}finally{Y(!1)}}},ie=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g);return h.jsxs(h.Fragment,{children:[h.jsx(Vt,{title:"POS - Kasir Suara"}),h.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-100px)] gap-6",children:[h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"mb-4 flex justify-between items-center pr-2",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Kasir (POS)"}),h.jsxs("p",{className:"text-muted-foreground text-sm flex items-center gap-2",children:[h.jsx(kn,{className:"h-3 w-3"})," Ctrl+F cari, Ctrl+M suara"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ve,{variant:b?"destructive":"outline",size:"icon",onClick:S,children:b?h.jsx(ot,{className:"h-4 w-4"}):h.jsx(ct,{className:"h-4 w-4"})}),h.jsxs(ve,{variant:"ghost",onClick:()=>window.history.back(),children:[h.jsx(fn,{className:"h-4 w-4 mr-2"})," Kembali"]})]})]}),h.jsxs("div",{className:"flex gap-2 mb-4 pr-2",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(Ut,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),h.jsx(tn,{ref:x,placeholder:"Cari layanan...",className:"pl-9",value:d,onChange:g=>m(g.target.value)})]}),h.jsx("div",{className:"flex bg-muted rounded-md p-1 gap-1",children:["all","kiloan","satuan"].map(g=>h.jsx("button",{onClick:()=>u(g),className:hn("px-3 text-xs font-medium rounded-sm capitalize",y===g?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:g},g))})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 pb-4",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.jsx(at,{children:E.map(g=>h.jsx(Se.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:h.jsx(on,{className:"cursor-pointer hover:border-primary transition-all group",children:h.jsxs("div",{onClick:()=>v(g),children:[h.jsx(rn,{className:"p-4 pb-2",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx(sn,{className:"text-base group-hover:text-primary line-clamp-1",children:g.name}),h.jsxs(st,{variant:"secondary",className:"text-[10px]",children:["/",g.unit]})]})}),h.jsxs(an,{className:"p-4 pt-0 mt-2 flex justify-between items-center",children:[h.jsx("span",{className:"font-bold",children:ie(parseFloat(g.price))}),h.jsx("div",{className:"h-7 w-7 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx(xt,{className:"h-4 w-4"})})]})]})})},g.id))})}),h.jsx(at,{children:b&&h.jsx(Se.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-6 left-0 right-0 z-[100] flex justify-center px-4",children:h.jsxs("div",{className:"bg-zinc-900/95 dark:bg-zinc-100/95 text-white dark:text-black backdrop-blur shadow-2xl rounded-2xl p-4 flex items-center gap-4 max-w-xl w-full border border-white/10",children:[h.jsxs("div",{className:"relative h-10 w-10 flex items-center justify-center bg-red-500 rounded-full",children:[h.jsx("span",{className:"absolute inset-0 rounded-full bg-red-500 animate-ping opacity-50"}),h.jsx(ct,{className:"h-5 w-5 text-white relative z-10"})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-[10px] font-bold uppercase opacity-50",children:"Sistem Mendengar"}),h.jsx("p",{className:"text-lg font-medium truncate",children:k})]}),h.jsx(ve,{variant:"ghost",size:"icon",onClick:S,className:"rounded-full hover:bg-white/10",children:h.jsx(ot,{className:"h-5 w-5"})})]})})}),!window.isSecureContext&&window.location.hostname!=="localhost"&&h.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-[100] bg-destructive text-white p-4 rounded-xl shadow-2xl text-center",children:[h.jsx("strong",{children:"Gunakan Localhost atau HTTPS!"}),h.jsx("br",{}),"Browser memblokir mic di alamat IP."]})]})]}),h.jsxs("div",{className:"w-full md:w-[380px] flex flex-col bg-card border rounded-xl shadow-lg h-full overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[h.jsx(nn,{className:"text-xs font-bold text-muted-foreground uppercase mb-2 block",children:"Pelanggan"}),o?h.jsxs("div",{className:"p-2 bg-background border rounded-md font-medium text-sm flex justify-between items-center",children:[h.jsx("span",{children:j?.name||c.name}),h.jsx(st,{variant:"secondary",className:"text-[10px]",children:"Anda"})]}):h.jsxs(cn,{open:A,onOpenChange:I,children:[h.jsx(un,{asChild:!0,children:h.jsxs(ve,{variant:"outline",className:"w-full justify-between bg-background",children:[j?j.name:"Pilih Pelanggan...",h.jsx(Sn,{className:"ml-2 h-4 w-4 opacity-50"})]})}),h.jsx(ln,{className:"w-[340px] p-0",children:h.jsxs(Ht,{children:[h.jsx(Yt,{placeholder:"Cari..."}),h.jsxs(Zt,{children:[h.jsx(Qt,{children:"Tidak ada."}),h.jsx(Jt,{children:t.map(g=>h.jsx(Xt,{onSelect:()=>{H(g),I(!1)},children:g.name},g.id))})]})]})})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-slate-50/50 dark:bg-slate-900/20",children:w.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground opacity-30",children:[h.jsx(Rn,{className:"h-12 w-12 mb-2"}),h.jsx("p",{children:"Kosong"})]}):w.map(g=>h.jsx(ni,{item:g,updateQty:M,removeItem:B},g.serviceId))}),h.jsxs("div",{className:"p-4 border-t bg-background",children:[h.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[h.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[h.jsx("span",{children:"Subtotal"}),h.jsx("span",{children:ie(O)})]}),Z>0&&h.jsxs("div",{className:"flex justify-between text-emerald-600 font-bold",children:[h.jsx("span",{children:"Diskon"}),h.jsxs("span",{children:["-",ie(Z)]})]}),h.jsx(dn,{}),h.jsxs("div",{className:"flex justify-between text-xl font-bold pt-1",children:[h.jsx("span",{children:"Total"}),h.jsx("span",{className:"text-primary",children:h.jsx(ti,{value:ne})})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[h.jsxs(ve,{variant:P==="cash"?"default":"outline",onClick:()=>R("cash"),className:"flex-col h-auto py-2 gap-1",children:[h.jsx(xn,{className:"h-4 w-4"}),h.jsx("span",{className:"text-[10px]",children:"Tunai"})]}),h.jsxs(ve,{variant:P==="midtrans"?"default":"outline",onClick:()=>R("midtrans"),className:"flex-col h-auto py-2 gap-1",children:[h.jsx(wn,{className:"h-4 w-4"}),h.jsx("span",{className:"text-[10px]",children:"QRIS"})]})]}),h.jsx(ve,{className:"w-full h-12 font-bold text-lg",disabled:X||w.length===0||!j,onClick:K,children:X?h.jsx(Cn,{className:"animate-spin"}):"Bayar"})]})]})]})]})}ri.layout=t=>h.jsx(en,{children:t});export{ri as default};
