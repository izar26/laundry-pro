import{a as y,r as x,u as v,j as a,H as E}from"./app-CUXBW5dx.js";import{P as C,e as F,f as I,g as T,D as M,a as S,b as B,d as b,A as H}from"./AdminLayout-Dj6WvTEP.js";import{D as L}from"./data-table-c7Fdhk67.js";import{B as g}from"./index-BvATWSjf.js";import{D as K,a as O,b as U,c as G,d as Y,e as z}from"./dialog-C2_qrMnw.js";import{A as R,a as V,b as _,c as $,d as q,e as J,f as Q,g as W,E as X}from"./alert-dialog-D3mrlBtR.js";import{I as D}from"./input-HL_z3B_7.js";import{L as N}from"./label-DNEfGfht.js";import{t as h}from"./index-B0o19xSs.js";import{U as Z}from"./user-DF__yQ7w.js";import{P as aa}from"./pencil-BsbuVYM6.js";import{T as ea}from"./trash-Bxym_lDS.js";import{L as sa}from"./loader-circle-CiGR35HH.js";import"./utils-BELw0PCo.js";import"./index-88lnrqSU.js";import"./index-DFuNHLiv.js";import"./createLucideIcon-uJREzNGo.js";import"./check-pd34nBtK.js";import"./BackgroundParticles-D888wk9C.js";import"./shirt-DHfAMZvd.js";import"./proxy-BiQenJV9.js";import"./index-Bgpi0fHY.js";function ia({employee:e,isOpen:c,setIsOpen:n}){const{data:o,setData:t,post:j,put:m,processing:l,errors:s,reset:p,clearErrors:d}=v({name:"",email:"",password:""});x.useEffect(()=>{e?t({name:e.name,email:e.email,password:""}):p(),d()},[e,c]);const w=r=>{r.preventDefault();const u={onSuccess:()=>{n(!1),p(),h.success(e?"Data pegawai diperbarui.":"Pegawai baru ditambahkan.")},onError:()=>{h.error("Gagal menyimpan data pegawai.")}};e?m(route("employees.update",e.id),u):j(route("employees.store"),u)};return a.jsx(K,{open:c,onOpenChange:n,children:a.jsxs(O,{className:"sm:max-w-[500px]",children:[a.jsxs(U,{children:[a.jsx(G,{children:e?"Edit Data Pegawai":"Tambah Pegawai Baru"}),a.jsx(Y,{children:'Pegawai baru akan otomatis mendapatkan role "Pegawai" dan bisa login ke sistem.'})]}),a.jsxs("form",{onSubmit:w,className:"grid gap-4 py-2",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsxs(N,{htmlFor:"name",children:["Nama Lengkap ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(D,{id:"name",placeholder:"Nama Pegawai",value:o.name,onChange:r=>t("name",r.target.value),className:s.name?"border-destructive":""}),s.name&&a.jsx("span",{className:"text-xs text-destructive",children:s.name})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsxs(N,{htmlFor:"email",children:["Email Login ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(D,{id:"email",type:"email",placeholder:"pegawai@laundry.test",value:o.email,onChange:r=>t("email",r.target.value),className:s.email?"border-destructive":""}),s.email&&a.jsx("span",{className:"text-xs text-destructive",children:s.email})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsxs(N,{htmlFor:"password",children:[e?"Password Baru (Opsional)":"Password"," ",e?"":a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(D,{id:"password",type:"password",placeholder:e?"Biarkan kosong jika tidak ingin mengubah":"Minimal 8 karakter",value:o.password,onChange:r=>t("password",r.target.value),className:s.password?"border-destructive":""}),e&&a.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Isi hanya jika ingin mereset password pegawai ini."}),s.password&&a.jsx("span",{className:"text-xs text-destructive",children:s.password})]}),a.jsxs(z,{className:"mt-4",children:[a.jsx(g,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Batal"}),a.jsxs(g,{type:"submit",disabled:l,children:[l&&a.jsx(sa,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Simpan Perubahan":"Tambah Pegawai"]})]})]})]})})}function ra({employees:e}){const{auth:c}=y().props,n=c.user,[o,t]=x.useState(!1),[j,m]=x.useState(null),[l,s]=x.useState(null),{delete:p,processing:d}=v({}),w=()=>{m(null),t(!0)},r=i=>{m(i),t(!0)},u=i=>{s(i)},k=()=>{l&&p(route("employees.destroy",l),{onSuccess:()=>{s(null),h.success("Akun pegawai dihapus.")},onError:()=>h.error("Gagal menghapus akun.")})},P=[{accessorKey:"name",header:"Nama Pegawai",cell:({row:i})=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(F,{className:"h-8 w-8",children:[a.jsx(I,{src:`https://ui-avatars.com/api/?name=${i.original.name}&background=random`}),a.jsx(T,{children:a.jsx(Z,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:i.getValue("name")}),i.original.id===n.id&&a.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-1 rounded w-fit",children:"It's You"})]})]})},{accessorKey:"email",header:"Email"},{id:"actions",cell:({row:i})=>{const f=i.original,A=f.id===n.id;return a.jsx("div",{className:"flex justify-end",children:a.jsxs(M,{children:[a.jsx(S,{asChild:!0,children:a.jsx(g,{variant:"ghost",className:"h-8 w-8 p-0",children:a.jsx(X,{className:"h-4 w-4"})})}),a.jsxs(B,{align:"end",children:[a.jsxs(b,{onClick:()=>r(f),children:[a.jsx(aa,{className:"mr-2 h-4 w-4"})," Edit Data"]}),a.jsxs(b,{onClick:()=>u(f.id),className:"text-destructive",disabled:A,children:[a.jsx(ea,{className:"mr-2 h-4 w-4"})," Hapus Akun"]})]})]})})}}];return a.jsxs(a.Fragment,{children:[a.jsx(E,{title:"Manajemen Pegawai"}),a.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Data Pegawai"}),a.jsx("p",{className:"text-muted-foreground",children:"Kelola akun staf yang memiliki akses ke sistem."})]}),a.jsxs(g,{onClick:w,size:"lg",children:[a.jsx(C,{className:"mr-2 h-4 w-4"})," Tambah Pegawai"]})]}),a.jsx("div",{className:"mt-8",children:a.jsx(L,{columns:P,data:e.data,pagination:e,searchKey:"name"})}),a.jsx(ia,{isOpen:o,setIsOpen:t,employee:j}),a.jsx(R,{open:!!l,onOpenChange:i=>!i&&s(null),children:a.jsxs(V,{children:[a.jsxs(_,{children:[a.jsx($,{children:"Hapus Akun Pegawai?"}),a.jsx(q,{children:"Akses login pegawai ini akan dicabut permanen. Data transaksi yang pernah dibuat oleh pegawai ini tetap aman."})]}),a.jsxs(J,{children:[a.jsx(Q,{disabled:d,children:"Batal"}),a.jsx(W,{onClick:i=>{i.preventDefault(),k()},disabled:d,className:"bg-destructive hover:bg-destructive/90",children:d?"Menghapus...":"Ya, Hapus"})]})]})})]})}ra.layout=e=>a.jsx(H,{children:e});export{ra as default};
