import{r as j,a as k,j as e,H as A}from"./app-7s8hiYxq.js";import{P as F,D as P,a as E,b as T,c as I,d as b,A as H}from"./AdminLayout-CFfC6GJm.js";import{D as K}from"./data-table-BWTZ_5eM.js";import{B as f}from"./button-CoYIUQ8n.js";import{D as M,a as B,b as O,c as V,d as z,e as G}from"./dialog-rUj7TnDJ.js";import{A as R,a as Y,b as _,c as $,d as q,e as J,f as Q,g as U,E as W}from"./alert-dialog-D-dCdfm1.js";import{I as S}from"./input-cPps1pmR.js";import{L as h}from"./label-DZyVpPpN.js";import{T as X}from"./textarea-CuHHqF3L.js";import{S as Z,a as ee,b as ae,c as se,d as g}from"./select-DSp4UKg9.js";import{t as y}from"./index-D-8IWNkM.js";import{L}from"./loader-circle-CBlBxFG1.js";import{T as C}from"./trash-XSZhrjdc.js";import{D as ne}from"./dollar-sign-BjWmgtZs.js";import{P as re}from"./pencil-DtlEuGsF.js";import"./utils-BELw0PCo.js";import"./index--u_esZgY.js";import"./index-BjT_w43m.js";import"./index-C1JxSEvr.js";import"./index-DTNJ9c2i.js";import"./createLucideIcon-Dy0-ETzW.js";import"./check-BULhVQ_l.js";import"./avatar-xRcGscih.js";import"./index-C9Y6S3pY.js";import"./BackgroundParticles-t6YShm0f.js";import"./shirt-dau3Rk7F.js";import"./proxy-DXuHo8kw.js";import"./index-y0hQ5iqU.js";import"./index-BQQBZwWR.js";function te({service:s,isOpen:o,setIsOpen:d}){const{data:t,setData:i,post:u,put:m,processing:c,errors:r,reset:l,clearErrors:D}=k({name:"",price:"",unit:"kg",description:""});j.useEffect(()=>{s?i({name:s.name,price:parseFloat(s.price).toString(),unit:s.unit,description:s.description||""}):l(),D()},[s,o]);const N=n=>{n.preventDefault();const p={onSuccess:()=>{d(!1),l(),y.success(s?"Layanan berhasil diperbarui.":"Layanan baru ditambahkan.")},onError:()=>{y.error("Gagal menyimpan layanan. Periksa input Anda.")}};s?m(route("services.update",s.id),p):u(route("services.store"),p)};return e.jsx(M,{open:o,onOpenChange:d,children:e.jsxs(B,{className:"sm:max-w-[500px]",children:[e.jsxs(O,{children:[e.jsx(V,{children:s?"Edit Layanan":"Tambah Layanan Baru"}),e.jsx(z,{children:"Atur nama, harga, dan satuan layanan laundry Anda."})]}),e.jsxs("form",{onSubmit:N,className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"name",children:["Nama Layanan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{id:"name",placeholder:"Contoh: Cuci Komplit (Cuci + Setrika)",value:t.name,onChange:n=>i("name",n.target.value),className:r.name?"border-destructive":"",autoFocus:!0}),r.name&&e.jsx("span",{className:"text-xs text-destructive",children:r.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"price",children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(S,{id:"price",type:"number",placeholder:"0",value:t.price,onChange:n=>i("price",n.target.value),className:`pl-9 ${r.price?"border-destructive":""}`})]}),r.price&&e.jsx("span",{className:"text-xs text-destructive",children:r.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"unit",children:["Satuan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Z,{value:t.unit,onValueChange:n=>i("unit",n),children:[e.jsx(ee,{children:e.jsx(ae,{placeholder:"Pilih satuan"})}),e.jsxs(se,{children:[e.jsx(g,{value:"kg",children:"Per Kg"}),e.jsx(g,{value:"pcs",children:"Per Potong (Pcs)"}),e.jsx(g,{value:"meter",children:"Per Meter"}),e.jsx(g,{value:"set",children:"Per Set"})]})]}),r.unit&&e.jsx("span",{className:"text-xs text-destructive",children:r.unit})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"description",children:"Keterangan (Opsional)"}),e.jsx(X,{id:"description",placeholder:"Detail layanan, estimasi waktu, dll...",value:t.description,onChange:n=>i("description",n.target.value),className:"resize-none",rows:3})]}),e.jsxs(G,{className:"mt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Batal"}),e.jsxs(f,{type:"submit",disabled:c,children:[c&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Simpan Perubahan":"Simpan Layanan"]})]})]})]})})}function ie({services:s,canManageServices:o=!1}){const[d,t]=j.useState(!1),[i,u]=j.useState(null),[m,c]=j.useState(null),{delete:r,processing:l}=k({}),D=()=>{u(null),t(!0)},N=a=>{u(a),t(!0)},n=a=>{c(a)},p=()=>{m&&r(route("services.destroy",m),{onSuccess:()=>{c(null),y.success("Layanan berhasil dihapus.")},onError:()=>{y.error("Gagal menghapus layanan.")}})},v=[{accessorKey:"name",header:"Nama Layanan",cell:({row:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.getValue("name")}),a.original.description&&e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:a.original.description})]})},{accessorKey:"price",header:"Harga",cell:({row:a})=>{const x=parseFloat(a.getValue("price")),w=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x);return e.jsx("div",{className:"font-semibold",children:w})}},{accessorKey:"unit",header:"Satuan",cell:({row:a})=>e.jsxs("div",{className:"capitalize badge bg-secondary px-2 py-1 rounded-md text-xs inline-block",children:["/",a.getValue("unit")]})}];return o&&v.push({id:"actions",cell:({row:a})=>{const x=a.original;return e.jsx("div",{className:"flex justify-end",children:e.jsxs(P,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(W,{className:"h-4 w-4"})]})}),e.jsxs(T,{align:"end",children:[e.jsx(I,{children:"Aksi"}),e.jsxs(b,{onClick:()=>N(x),children:[e.jsx(re,{className:"mr-2 h-4 w-4"})," Edit Layanan"]}),e.jsxs(b,{onClick:()=>n(x.id),className:"text-destructive focus:text-destructive",children:[e.jsx(C,{className:"mr-2 h-4 w-4"})," Hapus"]})]})]})})}}),e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Manajemen Layanan"}),e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Daftar Layanan"}),e.jsx("p",{className:"text-muted-foreground",children:"Atur jenis layanan laundry dan harga satuan."})]}),o&&e.jsxs(f,{onClick:D,size:"lg",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Tambah Layanan"]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(K,{columns:v,data:s.data,pagination:s,searchKey:"name"})}),o&&e.jsxs(e.Fragment,{children:[e.jsx(te,{isOpen:d,setIsOpen:t,service:i}),e.jsx(R,{open:!!m,onOpenChange:a=>!a&&c(null),children:e.jsxs(Y,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Hapus Layanan?"}),e.jsx(q,{children:"Layanan ini akan dihapus permanen. Transaksi lama yang menggunakan layanan ini mungkin akan kehilangan referensi nama layanan."})]}),e.jsxs(J,{children:[e.jsx(Q,{disabled:l,children:"Batal"}),e.jsxs(U,{onClick:a=>{a.preventDefault(),p()},disabled:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[l?e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(C,{className:"mr-2 h-4 w-4"}),l?"Menghapus...":"Ya, Hapus"]})]})]})})]})]})}ie.layout=s=>e.jsx(H,{children:s});export{ie as default};
