import{r as j,u as C,j as e,H as w}from"./app-CUXBW5dx.js";import{P as A,D as F,a as P,b as E,c as T,d as v,A as I}from"./AdminLayout-Dj6WvTEP.js";import{D as H}from"./data-table-c7Fdhk67.js";import{B as f}from"./index-BvATWSjf.js";import{D as M,a as K,b as B,c as O,d as V,e as z}from"./dialog-C2_qrMnw.js";import{A as G,a as R,b as Y,c as _,d as $,e as q,f as J,g as Q,E as U}from"./alert-dialog-D3mrlBtR.js";import{I as b}from"./input-HL_z3B_7.js";import{L as h}from"./label-DNEfGfht.js";import{T as W}from"./textarea-KiGVKAuK.js";import{S as X,a as Z,b as ee,c as ae,d as g}from"./select-BqLD07ma.js";import{t as y}from"./index-B0o19xSs.js";import{L as k}from"./loader-circle-CiGR35HH.js";import{T as S}from"./trash-Bxym_lDS.js";import{P as se}from"./pencil-BsbuVYM6.js";import{D as ne}from"./dollar-sign-Cs0x5Wdn.js";import"./utils-BELw0PCo.js";import"./index-88lnrqSU.js";import"./index-DFuNHLiv.js";import"./createLucideIcon-uJREzNGo.js";import"./check-pd34nBtK.js";import"./BackgroundParticles-D888wk9C.js";import"./shirt-DHfAMZvd.js";import"./proxy-BiQenJV9.js";import"./index-Bgpi0fHY.js";import"./index-rFb6iV67.js";function re({service:s,isOpen:d,setIsOpen:i}){const{data:l,setData:t,post:c,put:o,processing:m,errors:n,reset:u,clearErrors:D}=C({name:"",price:"",unit:"kg",description:""});j.useEffect(()=>{s?t({name:s.name,price:parseFloat(s.price).toString(),unit:s.unit,description:s.description||""}):u(),D()},[s,d]);const N=r=>{r.preventDefault();const p={onSuccess:()=>{i(!1),u(),y.success(s?"Layanan berhasil diperbarui.":"Layanan baru ditambahkan.")},onError:()=>{y.error("Gagal menyimpan layanan. Periksa input Anda.")}};s?o(route("services.update",s.id),p):c(route("services.store"),p)};return e.jsx(M,{open:d,onOpenChange:i,children:e.jsxs(K,{className:"sm:max-w-[500px]",children:[e.jsxs(B,{children:[e.jsx(O,{children:s?"Edit Layanan":"Tambah Layanan Baru"}),e.jsx(V,{children:"Atur nama, harga, dan satuan layanan laundry Anda."})]}),e.jsxs("form",{onSubmit:N,className:"grid gap-4 py-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"name",children:["Nama Layanan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(b,{id:"name",placeholder:"Contoh: Cuci Komplit (Cuci + Setrika)",value:l.name,onChange:r=>t("name",r.target.value),className:n.name?"border-destructive":"",autoFocus:!0}),n.name&&e.jsx("span",{className:"text-xs text-destructive",children:n.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"price",children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(b,{id:"price",type:"number",placeholder:"0",value:l.price,onChange:r=>t("price",r.target.value),className:`pl-9 ${n.price?"border-destructive":""}`})]}),n.price&&e.jsx("span",{className:"text-xs text-destructive",children:n.price})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(h,{htmlFor:"unit",children:["Satuan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(X,{value:l.unit,onValueChange:r=>t("unit",r),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Pilih satuan"})}),e.jsxs(ae,{children:[e.jsx(g,{value:"kg",children:"Per Kg"}),e.jsx(g,{value:"pcs",children:"Per Potong (Pcs)"}),e.jsx(g,{value:"meter",children:"Per Meter"}),e.jsx(g,{value:"set",children:"Per Set"})]})]}),n.unit&&e.jsx("span",{className:"text-xs text-destructive",children:n.unit})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"description",children:"Keterangan (Opsional)"}),e.jsx(W,{id:"description",placeholder:"Detail layanan, estimasi waktu, dll...",value:l.description,onChange:r=>t("description",r.target.value),className:"resize-none",rows:3})]}),e.jsxs(z,{className:"mt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Batal"}),e.jsxs(f,{type:"submit",disabled:m,children:[m&&e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Simpan Perubahan":"Simpan Layanan"]})]})]})]})})}function te({services:s}){const[d,i]=j.useState(!1),[l,t]=j.useState(null),[c,o]=j.useState(null),{delete:m,processing:n}=C({}),u=()=>{t(null),i(!0)},D=a=>{t(a),i(!0)},N=a=>{o(a)},r=()=>{c&&m(route("services.destroy",c),{onSuccess:()=>{o(null),y.success("Layanan berhasil dihapus.")},onError:()=>{y.error("Gagal menghapus layanan.")}})},p=[{accessorKey:"name",header:"Nama Layanan",cell:({row:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.getValue("name")}),a.original.description&&e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:a.original.description})]})},{accessorKey:"price",header:"Harga",cell:({row:a})=>{const x=parseFloat(a.getValue("price")),L=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x);return e.jsx("div",{className:"font-semibold",children:L})}},{accessorKey:"unit",header:"Satuan",cell:({row:a})=>e.jsxs("div",{className:"capitalize badge bg-secondary px-2 py-1 rounded-md text-xs inline-block",children:["/",a.getValue("unit")]})},{id:"actions",cell:({row:a})=>{const x=a.original;return e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{children:[e.jsx(P,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(U,{className:"h-4 w-4"})]})}),e.jsxs(E,{align:"end",children:[e.jsx(T,{children:"Aksi"}),e.jsxs(v,{onClick:()=>D(x),children:[e.jsx(se,{className:"mr-2 h-4 w-4"})," Edit Layanan"]}),e.jsxs(v,{onClick:()=>N(x.id),className:"text-destructive focus:text-destructive",children:[e.jsx(S,{className:"mr-2 h-4 w-4"})," Hapus"]})]})]})})}}];return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Manajemen Layanan"}),e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Daftar Layanan"}),e.jsx("p",{className:"text-muted-foreground",children:"Atur jenis layanan laundry dan harga satuan."})]}),e.jsxs(f,{onClick:u,size:"lg",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Tambah Layanan"]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(H,{columns:p,data:s.data,pagination:s,searchKey:"name"})}),e.jsx(re,{isOpen:d,setIsOpen:i,service:l}),e.jsx(G,{open:!!c,onOpenChange:a=>!a&&o(null),children:e.jsxs(R,{children:[e.jsxs(Y,{children:[e.jsx(_,{children:"Hapus Layanan?"}),e.jsx($,{children:"Layanan ini akan dihapus permanen. Transaksi lama yang menggunakan layanan ini mungkin akan kehilangan referensi nama layanan."})]}),e.jsxs(q,{children:[e.jsx(J,{disabled:n,children:"Batal"}),e.jsxs(Q,{onClick:a=>{a.preventDefault(),r()},disabled:n,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[n?e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(S,{className:"mr-2 h-4 w-4"}),n?"Menghapus...":"Ya, Hapus"]})]})]})})]})}te.layout=s=>e.jsx(I,{children:s});export{te as default};
